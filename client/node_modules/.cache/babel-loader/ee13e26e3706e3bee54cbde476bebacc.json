{"ast":null,"code":"const reifyOutput = require('./reify-output.js');\n\nconst ini = require('ini');\n\nconst {\n  writeFile\n} = require('fs').promises;\n\nconst {\n  resolve\n} = require('path');\n\nconst reifyFinish = async (npm, arb) => {\n  await saveBuiltinConfig(npm, arb);\n  reifyOutput(npm, arb);\n};\n\nconst saveBuiltinConfig = async (npm, arb) => {\n  const {\n    options: {\n      global\n    },\n    actualTree\n  } = arb;\n\n  if (!global) {\n    return;\n  } // if we are using a builtin config, and just installed npm as\n  // a top-level global package, we have to preserve that config.\n\n\n  const npmNode = actualTree.inventory.get('node_modules/npm');\n\n  if (!npmNode) {\n    return;\n  }\n\n  const builtinConf = npm.config.data.get('builtin');\n\n  if (builtinConf.loadError) {\n    return;\n  }\n\n  const content = ini.stringify(builtinConf.raw).trim() + '\\n';\n  await writeFile(resolve(npmNode.path, 'npmrc'), content);\n};\n\nmodule.exports = reifyFinish;","map":{"version":3,"names":["reifyOutput","require","ini","writeFile","promises","resolve","reifyFinish","npm","arb","saveBuiltinConfig","options","global","actualTree","npmNode","inventory","get","builtinConf","config","data","loadError","content","stringify","raw","trim","path","module","exports"],"sources":["/Users/chelsea/Documents/0_AllCoding/shoppingstories-v3/node_modules/npm/lib/utils/reify-finish.js"],"sourcesContent":["const reifyOutput = require('./reify-output.js')\nconst ini = require('ini')\nconst { writeFile } = require('fs').promises\nconst { resolve } = require('path')\n\nconst reifyFinish = async (npm, arb) => {\n  await saveBuiltinConfig(npm, arb)\n  reifyOutput(npm, arb)\n}\n\nconst saveBuiltinConfig = async (npm, arb) => {\n  const { options: { global }, actualTree } = arb\n  if (!global) {\n    return\n  }\n\n  // if we are using a builtin config, and just installed npm as\n  // a top-level global package, we have to preserve that config.\n  const npmNode = actualTree.inventory.get('node_modules/npm')\n  if (!npmNode) {\n    return\n  }\n\n  const builtinConf = npm.config.data.get('builtin')\n  if (builtinConf.loadError) {\n    return\n  }\n\n  const content = ini.stringify(builtinConf.raw).trim() + '\\n'\n  await writeFile(resolve(npmNode.path, 'npmrc'), content)\n}\n\nmodule.exports = reifyFinish\n"],"mappings":"AAAA,MAAMA,WAAW,GAAGC,OAAO,CAAC,mBAAD,CAA3B;;AACA,MAAMC,GAAG,GAAGD,OAAO,CAAC,KAAD,CAAnB;;AACA,MAAM;EAAEE;AAAF,IAAgBF,OAAO,CAAC,IAAD,CAAP,CAAcG,QAApC;;AACA,MAAM;EAAEC;AAAF,IAAcJ,OAAO,CAAC,MAAD,CAA3B;;AAEA,MAAMK,WAAW,GAAG,OAAOC,GAAP,EAAYC,GAAZ,KAAoB;EACtC,MAAMC,iBAAiB,CAACF,GAAD,EAAMC,GAAN,CAAvB;EACAR,WAAW,CAACO,GAAD,EAAMC,GAAN,CAAX;AACD,CAHD;;AAKA,MAAMC,iBAAiB,GAAG,OAAOF,GAAP,EAAYC,GAAZ,KAAoB;EAC5C,MAAM;IAAEE,OAAO,EAAE;MAAEC;IAAF,CAAX;IAAuBC;EAAvB,IAAsCJ,GAA5C;;EACA,IAAI,CAACG,MAAL,EAAa;IACX;EACD,CAJ2C,CAM5C;EACA;;;EACA,MAAME,OAAO,GAAGD,UAAU,CAACE,SAAX,CAAqBC,GAArB,CAAyB,kBAAzB,CAAhB;;EACA,IAAI,CAACF,OAAL,EAAc;IACZ;EACD;;EAED,MAAMG,WAAW,GAAGT,GAAG,CAACU,MAAJ,CAAWC,IAAX,CAAgBH,GAAhB,CAAoB,SAApB,CAApB;;EACA,IAAIC,WAAW,CAACG,SAAhB,EAA2B;IACzB;EACD;;EAED,MAAMC,OAAO,GAAGlB,GAAG,CAACmB,SAAJ,CAAcL,WAAW,CAACM,GAA1B,EAA+BC,IAA/B,KAAwC,IAAxD;EACA,MAAMpB,SAAS,CAACE,OAAO,CAACQ,OAAO,CAACW,IAAT,EAAe,OAAf,CAAR,EAAiCJ,OAAjC,CAAf;AACD,CApBD;;AAsBAK,MAAM,CAACC,OAAP,GAAiBpB,WAAjB"},"metadata":{},"sourceType":"script"}