{"ast":null,"code":"const _progress = Symbol('_progress');\n\nconst _onError = Symbol('_onError');\n\nconst _setProgress = Symbol('_setProgess');\n\nconst npmlog = require('npmlog');\n\nmodule.exports = cls => class Tracker extends cls {\n  constructor() {\n    let options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    super(options);\n    this[_setProgress] = !!options.progress;\n    this[_progress] = new Map();\n  }\n\n  addTracker(section) {\n    let subsection = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n    let key = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;\n\n    if (section === null || section === undefined) {\n      this[_onError](`Tracker can't be null or undefined`);\n    }\n\n    if (key === null) {\n      key = subsection;\n    }\n\n    const hasTracker = this[_progress].has(section);\n\n    const hasSubtracker = this[_progress].has(`${section}:${key}`);\n\n    if (hasTracker && subsection === null) {\n      // 0. existing tracker, no subsection\n      this[_onError](`Tracker \"${section}\" already exists`);\n    } else if (!hasTracker && subsection === null) {\n      // 1. no existing tracker, no subsection\n      // Create a new tracker from npmlog\n      // starts progress bar\n      if (this[_setProgress] && this[_progress].size === 0) {\n        npmlog.enableProgress();\n      }\n\n      this[_progress].set(section, npmlog.newGroup(section));\n    } else if (!hasTracker && subsection !== null) {\n      // 2. no parent tracker and subsection\n      this[_onError](`Parent tracker \"${section}\" does not exist`);\n    } else if (!hasTracker || !hasSubtracker) {\n      // 3. existing parent tracker, no subsection tracker\n      // Create a new subtracker in this[_progress] from parent tracker\n      this[_progress].set(`${section}:${key}`, this[_progress].get(section).newGroup(`${section}:${subsection}`));\n    } // 4. existing parent tracker, existing subsection tracker\n    // skip it\n\n  }\n\n  finishTracker(section) {\n    let subsection = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n    let key = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;\n\n    if (section === null || section === undefined) {\n      this[_onError](`Tracker can't be null or undefined`);\n    }\n\n    if (key === null) {\n      key = subsection;\n    }\n\n    const hasTracker = this[_progress].has(section);\n\n    const hasSubtracker = this[_progress].has(`${section}:${key}`); // 0. parent tracker exists, no subsection\n    // Finish parent tracker and remove from this[_progress]\n\n\n    if (hasTracker && subsection === null) {\n      // check if parent tracker does\n      // not have any remaining children\n      const keys = this[_progress].keys();\n\n      for (const key of keys) {\n        if (key.match(new RegExp(section + ':'))) {\n          this.finishTracker(section, key);\n        }\n      } // remove parent tracker\n\n\n      this[_progress].get(section).finish();\n\n      this[_progress].delete(section); // remove progress bar if all\n      // trackers are finished\n\n\n      if (this[_setProgress] && this[_progress].size === 0) {\n        npmlog.disableProgress();\n      }\n    } else if (!hasTracker && subsection === null) {\n      // 1. no existing parent tracker, no subsection\n      this[_onError](`Tracker \"${section}\" does not exist`);\n    } else if (!hasTracker || hasSubtracker) {\n      // 2. subtracker exists\n      // Finish subtracker and remove from this[_progress]\n      this[_progress].get(`${section}:${key}`).finish();\n\n      this[_progress].delete(`${section}:${key}`);\n    } // 3. existing parent tracker, no subsection\n\n  }\n\n  [_onError](msg) {\n    if (this[_setProgress]) {\n      npmlog.disableProgress();\n    }\n\n    throw new Error(msg);\n  }\n\n};","map":{"version":3,"names":["_progress","Symbol","_onError","_setProgress","npmlog","require","module","exports","cls","Tracker","constructor","options","progress","Map","addTracker","section","subsection","key","undefined","hasTracker","has","hasSubtracker","size","enableProgress","set","newGroup","get","finishTracker","keys","match","RegExp","finish","delete","disableProgress","msg","Error"],"sources":["/Users/chelsea/Documents/0_AllCoding/shoppingstories-v3/node_modules/npm/node_modules/@npmcli/arborist/lib/tracker.js"],"sourcesContent":["const _progress = Symbol('_progress')\nconst _onError = Symbol('_onError')\nconst _setProgress = Symbol('_setProgess')\nconst npmlog = require('npmlog')\n\nmodule.exports = cls => class Tracker extends cls {\n  constructor (options = {}) {\n    super(options)\n    this[_setProgress] = !!options.progress\n    this[_progress] = new Map()\n  }\n\n  addTracker (section, subsection = null, key = null) {\n    if (section === null || section === undefined) {\n      this[_onError](`Tracker can't be null or undefined`)\n    }\n\n    if (key === null) {\n      key = subsection\n    }\n\n    const hasTracker = this[_progress].has(section)\n    const hasSubtracker = this[_progress].has(`${section}:${key}`)\n\n    if (hasTracker && subsection === null) {\n      // 0. existing tracker, no subsection\n      this[_onError](`Tracker \"${section}\" already exists`)\n    } else if (!hasTracker && subsection === null) {\n      // 1. no existing tracker, no subsection\n      // Create a new tracker from npmlog\n      // starts progress bar\n      if (this[_setProgress] && this[_progress].size === 0) {\n        npmlog.enableProgress()\n      }\n\n      this[_progress].set(section, npmlog.newGroup(section))\n    } else if (!hasTracker && subsection !== null) {\n      // 2. no parent tracker and subsection\n      this[_onError](`Parent tracker \"${section}\" does not exist`)\n    } else if (!hasTracker || !hasSubtracker) {\n      // 3. existing parent tracker, no subsection tracker\n      // Create a new subtracker in this[_progress] from parent tracker\n      this[_progress].set(`${section}:${key}`,\n        this[_progress].get(section).newGroup(`${section}:${subsection}`)\n      )\n    }\n    // 4. existing parent tracker, existing subsection tracker\n    // skip it\n  }\n\n  finishTracker (section, subsection = null, key = null) {\n    if (section === null || section === undefined) {\n      this[_onError](`Tracker can't be null or undefined`)\n    }\n\n    if (key === null) {\n      key = subsection\n    }\n\n    const hasTracker = this[_progress].has(section)\n    const hasSubtracker = this[_progress].has(`${section}:${key}`)\n\n    // 0. parent tracker exists, no subsection\n    // Finish parent tracker and remove from this[_progress]\n    if (hasTracker && subsection === null) {\n      // check if parent tracker does\n      // not have any remaining children\n      const keys = this[_progress].keys()\n      for (const key of keys) {\n        if (key.match(new RegExp(section + ':'))) {\n          this.finishTracker(section, key)\n        }\n      }\n\n      // remove parent tracker\n      this[_progress].get(section).finish()\n      this[_progress].delete(section)\n\n      // remove progress bar if all\n      // trackers are finished\n      if (this[_setProgress] && this[_progress].size === 0) {\n        npmlog.disableProgress()\n      }\n    } else if (!hasTracker && subsection === null) {\n      // 1. no existing parent tracker, no subsection\n      this[_onError](`Tracker \"${section}\" does not exist`)\n    } else if (!hasTracker || hasSubtracker) {\n      // 2. subtracker exists\n      // Finish subtracker and remove from this[_progress]\n      this[_progress].get(`${section}:${key}`).finish()\n      this[_progress].delete(`${section}:${key}`)\n    }\n    // 3. existing parent tracker, no subsection\n  }\n\n  [_onError] (msg) {\n    if (this[_setProgress]) {\n      npmlog.disableProgress()\n    }\n    throw new Error(msg)\n  }\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"script"}