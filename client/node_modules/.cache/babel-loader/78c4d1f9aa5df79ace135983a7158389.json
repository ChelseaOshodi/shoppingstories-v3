{"ast":null,"code":"module.exports = init;\nmodule.exports.yes = yes;\n\nvar PZ = require('promzard').PromZard;\n\nvar path = require('path');\n\nvar def = require.resolve('./default-input.js');\n\nvar fs = require('fs');\n\nvar semver = require('semver');\n\nvar read = require('read'); // to validate the data object at the end as a worthwhile package\n// and assign default values for things.\n\n\nvar readJson = require('read-package-json');\n\nfunction yes(conf) {\n  return !!(conf.get('yes') || conf.get('y') || conf.get('force') || conf.get('f'));\n}\n\nfunction init(dir, input, config, cb) {\n  if (typeof config === 'function') {\n    cb = config;\n    config = {};\n  } // accept either a plain-jane object, or a config object\n  // with a \"get\" method.\n\n\n  if (typeof config.get !== 'function') {\n    var data = config;\n    config = {\n      get: function (k) {\n        return data[k];\n      },\n      toJSON: function () {\n        return data;\n      }\n    };\n  }\n\n  var packageFile = path.resolve(dir, 'package.json');\n  input = path.resolve(input);\n  var pkg;\n  var ctx = {\n    yes: yes(config)\n  };\n  var es = readJson.extraSet;\n  readJson.extraSet = es.filter(function (fn) {\n    return fn.name !== 'authors' && fn.name !== 'mans';\n  });\n  readJson(packageFile, function (er, d) {\n    readJson.extraSet = es;\n\n    if (er) {\n      pkg = {};\n    } else {\n      pkg = d;\n    }\n\n    ctx.filename = packageFile;\n    ctx.dirname = path.dirname(packageFile);\n    ctx.basename = path.basename(ctx.dirname);\n\n    if (!pkg.version || !semver.valid(pkg.version)) {\n      delete pkg.version;\n    }\n\n    ctx.package = pkg;\n    ctx.config = config || {}; // make sure that the input is valid.\n    // if not, use the default\n\n    var pz = new PZ(input, ctx);\n    pz.backupFile = def;\n    pz.on('error', cb);\n    pz.on('data', function (pzData) {\n      Object.keys(pzData).forEach(function (k) {\n        if (pzData[k] !== undefined && pzData[k] !== null) {\n          pkg[k] = pzData[k];\n        }\n      }); // only do a few of these.\n      // no need for mans or contributors if they're in the files\n\n      es = readJson.extraSet;\n      readJson.extraSet = es.filter(function (fn) {\n        return fn.name !== 'authors' && fn.name !== 'mans';\n      });\n      readJson.extras(packageFile, pkg, function (extrasErr, pkgWithExtras) {\n        if (extrasErr) {\n          return cb(extrasErr, pkgWithExtras);\n        }\n\n        readJson.extraSet = es;\n        pkgWithExtras = unParsePeople(pkgWithExtras); // no need for the readme now.\n\n        delete pkgWithExtras.readme;\n        delete pkgWithExtras.readmeFilename; // really don't want to have this lying around in the file\n\n        delete pkgWithExtras._id; // ditto\n\n        delete pkgWithExtras.gitHead; // if the repo is empty, remove it.\n\n        if (!pkgWithExtras.repository) {\n          delete pkgWithExtras.repository;\n        } // readJson filters out empty descriptions, but init-package-json\n        // traditionally leaves them alone\n\n\n        if (!pkgWithExtras.description) {\n          pkgWithExtras.description = pzData.description;\n        }\n\n        var stringified = JSON.stringify(updateDeps(pkgWithExtras), null, 2) + '\\n';\n\n        function write(writeYes) {\n          fs.writeFile(packageFile, stringified, 'utf8', function (writeFileErr) {\n            if (!writeFileErr && writeYes && !config.get('silent')) {\n              console.log('Wrote to %s:\\n\\n%s\\n', packageFile, stringified);\n            }\n\n            return cb(writeFileErr, pkgWithExtras);\n          });\n        }\n\n        if (ctx.yes) {\n          return write(true);\n        }\n\n        console.log('About to write to %s:\\n\\n%s\\n', packageFile, stringified);\n        read({\n          prompt: 'Is this OK? ',\n          default: 'yes'\n        }, function (promptErr, ok) {\n          if (promptErr) {\n            return cb(promptErr);\n          }\n\n          if (!ok || ok.toLowerCase().charAt(0) !== 'y') {\n            console.log('Aborted.');\n          } else {\n            return write();\n          }\n        });\n      });\n    });\n  });\n}\n\nfunction updateDeps(depsData) {\n  // optionalDependencies don't need to be repeated in two places\n  if (depsData.dependencies) {\n    if (depsData.optionalDependencies) {\n      for (const name of Object.keys(depsData.optionalDependencies)) {\n        delete depsData.dependencies[name];\n      }\n    }\n\n    if (Object.keys(depsData.dependencies).length === 0) {\n      delete depsData.dependencies;\n    }\n  }\n\n  return depsData;\n} // turn the objects into somewhat more humane strings.\n\n\nfunction unParsePeople(data) {\n  if (data.author) {\n    data.author = unParsePerson(data.author);\n  }\n\n  ['maintainers', 'contributors'].forEach(function (set) {\n    if (!Array.isArray(data[set])) {\n      return;\n    }\n\n    data[set] = data[set].map(unParsePerson);\n  });\n  return data;\n}\n\nfunction unParsePerson(person) {\n  if (typeof person === 'string') {\n    return person;\n  }\n\n  var name = person.name || '';\n  var u = person.url || person.web;\n  var url = u ? ' (' + u + ')' : '';\n  var e = person.email || person.mail;\n  var email = e ? ' <' + e + '>' : '';\n  return name + email + url;\n}","map":{"version":3,"names":["module","exports","init","yes","PZ","require","PromZard","path","def","resolve","fs","semver","read","readJson","conf","get","dir","input","config","cb","data","k","toJSON","packageFile","pkg","ctx","es","extraSet","filter","fn","name","er","d","filename","dirname","basename","version","valid","package","pz","backupFile","on","pzData","Object","keys","forEach","undefined","extras","extrasErr","pkgWithExtras","unParsePeople","readme","readmeFilename","_id","gitHead","repository","description","stringified","JSON","stringify","updateDeps","write","writeYes","writeFile","writeFileErr","console","log","prompt","default","promptErr","ok","toLowerCase","charAt","depsData","dependencies","optionalDependencies","length","author","unParsePerson","set","Array","isArray","map","person","u","url","web","e","email","mail"],"sources":["/Users/chelsea/Documents/0_AllCoding/shoppingstories-v3/node_modules/npm/node_modules/init-package-json/lib/init-package-json.js"],"sourcesContent":["\nmodule.exports = init\nmodule.exports.yes = yes\n\nvar PZ = require('promzard').PromZard\nvar path = require('path')\nvar def = require.resolve('./default-input.js')\n\nvar fs = require('fs')\nvar semver = require('semver')\nvar read = require('read')\n\n// to validate the data object at the end as a worthwhile package\n// and assign default values for things.\nvar readJson = require('read-package-json')\n\nfunction yes (conf) {\n  return !!(\n    conf.get('yes') || conf.get('y') ||\n    conf.get('force') || conf.get('f')\n  )\n}\n\nfunction init (dir, input, config, cb) {\n  if (typeof config === 'function') {\n    cb = config\n    config = {}\n  }\n\n  // accept either a plain-jane object, or a config object\n  // with a \"get\" method.\n  if (typeof config.get !== 'function') {\n    var data = config\n    config = {\n      get: function (k) {\n        return data[k]\n      },\n      toJSON: function () {\n        return data\n      },\n    }\n  }\n\n  var packageFile = path.resolve(dir, 'package.json')\n  input = path.resolve(input)\n  var pkg\n  var ctx = { yes: yes(config) }\n\n  var es = readJson.extraSet\n  readJson.extraSet = es.filter(function (fn) {\n    return fn.name !== 'authors' && fn.name !== 'mans'\n  })\n  readJson(packageFile, function (er, d) {\n    readJson.extraSet = es\n\n    if (er) {\n      pkg = {}\n    } else {\n      pkg = d\n    }\n\n    ctx.filename = packageFile\n    ctx.dirname = path.dirname(packageFile)\n    ctx.basename = path.basename(ctx.dirname)\n    if (!pkg.version || !semver.valid(pkg.version)) {\n      delete pkg.version\n    }\n\n    ctx.package = pkg\n    ctx.config = config || {}\n\n    // make sure that the input is valid.\n    // if not, use the default\n    var pz = new PZ(input, ctx)\n    pz.backupFile = def\n    pz.on('error', cb)\n    pz.on('data', function (pzData) {\n      Object.keys(pzData).forEach(function (k) {\n        if (pzData[k] !== undefined && pzData[k] !== null) {\n          pkg[k] = pzData[k]\n        }\n      })\n\n      // only do a few of these.\n      // no need for mans or contributors if they're in the files\n      es = readJson.extraSet\n      readJson.extraSet = es.filter(function (fn) {\n        return fn.name !== 'authors' && fn.name !== 'mans'\n      })\n      readJson.extras(packageFile, pkg, function (extrasErr, pkgWithExtras) {\n        if (extrasErr) {\n          return cb(extrasErr, pkgWithExtras)\n        }\n        readJson.extraSet = es\n        pkgWithExtras = unParsePeople(pkgWithExtras)\n        // no need for the readme now.\n        delete pkgWithExtras.readme\n        delete pkgWithExtras.readmeFilename\n\n        // really don't want to have this lying around in the file\n        delete pkgWithExtras._id\n\n        // ditto\n        delete pkgWithExtras.gitHead\n\n        // if the repo is empty, remove it.\n        if (!pkgWithExtras.repository) {\n          delete pkgWithExtras.repository\n        }\n\n        // readJson filters out empty descriptions, but init-package-json\n        // traditionally leaves them alone\n        if (!pkgWithExtras.description) {\n          pkgWithExtras.description = pzData.description\n        }\n\n        var stringified = JSON.stringify(updateDeps(pkgWithExtras), null, 2) + '\\n'\n        function write (writeYes) {\n          fs.writeFile(packageFile, stringified, 'utf8', function (writeFileErr) {\n            if (!writeFileErr && writeYes && !config.get('silent')) {\n              console.log('Wrote to %s:\\n\\n%s\\n', packageFile, stringified)\n            }\n            return cb(writeFileErr, pkgWithExtras)\n          })\n        }\n        if (ctx.yes) {\n          return write(true)\n        }\n        console.log('About to write to %s:\\n\\n%s\\n', packageFile, stringified)\n        read({ prompt: 'Is this OK? ', default: 'yes' }, function (promptErr, ok) {\n          if (promptErr) {\n            return cb(promptErr)\n          }\n          if (!ok || ok.toLowerCase().charAt(0) !== 'y') {\n            console.log('Aborted.')\n          } else {\n            return write()\n          }\n        })\n      })\n    })\n  })\n}\n\nfunction updateDeps (depsData) {\n  // optionalDependencies don't need to be repeated in two places\n  if (depsData.dependencies) {\n    if (depsData.optionalDependencies) {\n      for (const name of Object.keys(depsData.optionalDependencies)) {\n        delete depsData.dependencies[name]\n      }\n    }\n    if (Object.keys(depsData.dependencies).length === 0) {\n      delete depsData.dependencies\n    }\n  }\n\n  return depsData\n}\n\n// turn the objects into somewhat more humane strings.\nfunction unParsePeople (data) {\n  if (data.author) {\n    data.author = unParsePerson(data.author)\n  }['maintainers', 'contributors'].forEach(function (set) {\n    if (!Array.isArray(data[set])) {\n      return\n    }\n    data[set] = data[set].map(unParsePerson)\n  })\n  return data\n}\n\nfunction unParsePerson (person) {\n  if (typeof person === 'string') {\n    return person\n  }\n  var name = person.name || ''\n  var u = person.url || person.web\n  var url = u ? (' (' + u + ')') : ''\n  var e = person.email || person.mail\n  var email = e ? (' <' + e + '>') : ''\n  return name + email + url\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"script"}