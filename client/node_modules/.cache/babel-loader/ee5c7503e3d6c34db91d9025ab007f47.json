{"ast":null,"code":"async function otplease(npm, opts, fn) {\n  try {\n    return await fn(opts);\n  } catch (err) {\n    if (!process.stdin.isTTY || !process.stdout.isTTY) {\n      throw err;\n    }\n\n    if (isWebOTP(err)) {\n      const webAuth = require('./web-auth');\n\n      const openUrlPrompt = require('./open-url-prompt');\n\n      const openerPromise = (url, emitter) => openUrlPrompt(npm, url, 'Authenticate your account at', 'Press ENTER to open in the browser...', emitter);\n\n      const otp = await webAuth(openerPromise, err.body.authUrl, err.body.doneUrl, opts);\n      return await fn({ ...opts,\n        otp\n      });\n    }\n\n    if (isClassicOTP(err)) {\n      const readUserInfo = require('./read-user-info.js');\n\n      const otp = await readUserInfo.otp('This operation requires a one-time password.\\nEnter OTP:');\n      return await fn({ ...opts,\n        otp\n      });\n    }\n\n    throw err;\n  }\n}\n\nfunction isWebOTP(err) {\n  if (!err.code === 'EOTP' || !err.body) {\n    return false;\n  }\n\n  return err.body.authUrl && err.body.doneUrl;\n}\n\nfunction isClassicOTP(err) {\n  return err.code === 'EOTP' || err.code === 'E401' && /one-time pass/.test(err.body);\n}\n\nmodule.exports = otplease;","map":{"version":3,"names":["otplease","npm","opts","fn","err","process","stdin","isTTY","stdout","isWebOTP","webAuth","require","openUrlPrompt","openerPromise","url","emitter","otp","body","authUrl","doneUrl","isClassicOTP","readUserInfo","code","test","module","exports"],"sources":["/Users/chelsea/Documents/0_AllCoding/shoppingstories-v3/node_modules/npm/lib/utils/otplease.js"],"sourcesContent":["async function otplease (npm, opts, fn) {\n  try {\n    return await fn(opts)\n  } catch (err) {\n    if (!process.stdin.isTTY || !process.stdout.isTTY) {\n      throw err\n    }\n\n    if (isWebOTP(err)) {\n      const webAuth = require('./web-auth')\n      const openUrlPrompt = require('./open-url-prompt')\n\n      const openerPromise = (url, emitter) =>\n        openUrlPrompt(\n          npm,\n          url,\n          'Authenticate your account at',\n          'Press ENTER to open in the browser...',\n          emitter\n        )\n      const otp = await webAuth(openerPromise, err.body.authUrl, err.body.doneUrl, opts)\n      return await fn({ ...opts, otp })\n    }\n\n    if (isClassicOTP(err)) {\n      const readUserInfo = require('./read-user-info.js')\n      const otp = await readUserInfo.otp('This operation requires a one-time password.\\nEnter OTP:')\n      return await fn({ ...opts, otp })\n    }\n\n    throw err\n  }\n}\n\nfunction isWebOTP (err) {\n  if (!err.code === 'EOTP' || !err.body) {\n    return false\n  }\n  return err.body.authUrl && err.body.doneUrl\n}\n\nfunction isClassicOTP (err) {\n  return err.code === 'EOTP' || (err.code === 'E401' && /one-time pass/.test(err.body))\n}\n\nmodule.exports = otplease\n"],"mappings":"AAAA,eAAeA,QAAf,CAAyBC,GAAzB,EAA8BC,IAA9B,EAAoCC,EAApC,EAAwC;EACtC,IAAI;IACF,OAAO,MAAMA,EAAE,CAACD,IAAD,CAAf;EACD,CAFD,CAEE,OAAOE,GAAP,EAAY;IACZ,IAAI,CAACC,OAAO,CAACC,KAAR,CAAcC,KAAf,IAAwB,CAACF,OAAO,CAACG,MAAR,CAAeD,KAA5C,EAAmD;MACjD,MAAMH,GAAN;IACD;;IAED,IAAIK,QAAQ,CAACL,GAAD,CAAZ,EAAmB;MACjB,MAAMM,OAAO,GAAGC,OAAO,CAAC,YAAD,CAAvB;;MACA,MAAMC,aAAa,GAAGD,OAAO,CAAC,mBAAD,CAA7B;;MAEA,MAAME,aAAa,GAAG,CAACC,GAAD,EAAMC,OAAN,KACpBH,aAAa,CACXX,GADW,EAEXa,GAFW,EAGX,8BAHW,EAIX,uCAJW,EAKXC,OALW,CADf;;MAQA,MAAMC,GAAG,GAAG,MAAMN,OAAO,CAACG,aAAD,EAAgBT,GAAG,CAACa,IAAJ,CAASC,OAAzB,EAAkCd,GAAG,CAACa,IAAJ,CAASE,OAA3C,EAAoDjB,IAApD,CAAzB;MACA,OAAO,MAAMC,EAAE,CAAC,EAAE,GAAGD,IAAL;QAAWc;MAAX,CAAD,CAAf;IACD;;IAED,IAAII,YAAY,CAAChB,GAAD,CAAhB,EAAuB;MACrB,MAAMiB,YAAY,GAAGV,OAAO,CAAC,qBAAD,CAA5B;;MACA,MAAMK,GAAG,GAAG,MAAMK,YAAY,CAACL,GAAb,CAAiB,0DAAjB,CAAlB;MACA,OAAO,MAAMb,EAAE,CAAC,EAAE,GAAGD,IAAL;QAAWc;MAAX,CAAD,CAAf;IACD;;IAED,MAAMZ,GAAN;EACD;AACF;;AAED,SAASK,QAAT,CAAmBL,GAAnB,EAAwB;EACtB,IAAI,CAACA,GAAG,CAACkB,IAAL,KAAc,MAAd,IAAwB,CAAClB,GAAG,CAACa,IAAjC,EAAuC;IACrC,OAAO,KAAP;EACD;;EACD,OAAOb,GAAG,CAACa,IAAJ,CAASC,OAAT,IAAoBd,GAAG,CAACa,IAAJ,CAASE,OAApC;AACD;;AAED,SAASC,YAAT,CAAuBhB,GAAvB,EAA4B;EAC1B,OAAOA,GAAG,CAACkB,IAAJ,KAAa,MAAb,IAAwBlB,GAAG,CAACkB,IAAJ,KAAa,MAAb,IAAuB,gBAAgBC,IAAhB,CAAqBnB,GAAG,CAACa,IAAzB,CAAtD;AACD;;AAEDO,MAAM,CAACC,OAAP,GAAiBzB,QAAjB"},"metadata":{},"sourceType":"script"}