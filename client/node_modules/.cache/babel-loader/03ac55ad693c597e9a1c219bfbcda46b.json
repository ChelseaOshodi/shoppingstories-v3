{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nfunction once(emitter, name) {\n  let {\n    signal\n  } = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  return new Promise((resolve, reject) => {\n    function cleanup() {\n      signal === null || signal === void 0 ? void 0 : signal.removeEventListener('abort', cleanup);\n      emitter.removeListener(name, onEvent);\n      emitter.removeListener('error', onError);\n    }\n\n    function onEvent() {\n      cleanup();\n\n      for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n      }\n\n      resolve(args);\n    }\n\n    function onError(err) {\n      cleanup();\n      reject(err);\n    }\n\n    signal === null || signal === void 0 ? void 0 : signal.addEventListener('abort', cleanup);\n    emitter.on(name, onEvent);\n    emitter.on('error', onError);\n  });\n}\n\nexports.default = once;","map":{"version":3,"mappings":";;;;;;AAOA,SAAwBA,IAAxB,CAICC,OAJD,EAKCC,IALD,EAM6B;EAAA,IAA5B;IAAEC;EAAF,CAA4B,uEAAF,EAAE;EAE5B,OAAO,IAAIC,OAAJ,CAAY,CAACC,OAAD,EAAUC,MAAV,KAAoB;IACtC,SAASC,OAAT,GAAgB;MACfJ,MAAM,SAAN,UAAM,WAAN,GAAM,MAAN,SAAM,CAAEK,mBAAR,CAA4B,OAA5B,EAAqCD,OAArC;MACAN,OAAO,CAACQ,cAAR,CAAuBP,IAAvB,EAA6BQ,OAA7B;MACAT,OAAO,CAACQ,cAAR,CAAuB,OAAvB,EAAgCE,OAAhC;IACA;;IACD,SAASD,OAAT,GAA+B;MAC9BH,OAAO;;MADuB,kCAAXK,IAAW;QAAXA,IAAW;MAAA;;MAE9BP,OAAO,CAACO,IAAD,CAAP;IACA;;IACD,SAASD,OAAT,CAAiBE,GAAjB,EAA2B;MAC1BN,OAAO;MACPD,MAAM,CAACO,GAAD,CAAN;IACA;;IACDV,MAAM,SAAN,UAAM,WAAN,GAAM,MAAN,SAAM,CAAEW,gBAAR,CAAyB,OAAzB,EAAkCP,OAAlC;IACAN,OAAO,CAACc,EAAR,CAAWb,IAAX,EAAiBQ,OAAjB;IACAT,OAAO,CAACc,EAAR,CAAW,OAAX,EAAoBJ,OAApB;EACA,CAjBM,CAAP;AAkBA;;AA1BDK","names":["once","emitter","name","signal","Promise","resolve","reject","cleanup","removeEventListener","removeListener","onEvent","onError","args","err","addEventListener","on","exports"],"sources":["../src/index.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"script"}