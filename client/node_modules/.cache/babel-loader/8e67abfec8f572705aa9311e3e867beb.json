{"ast":null,"code":"const columns = require('cli-columns');\n\nconst libteam = require('libnpmteam');\n\nconst otplease = require('../utils/otplease.js');\n\nconst BaseCommand = require('../base-command.js');\n\nclass Team extends BaseCommand {\n  static description = 'Manage organization teams and team memberships';\n  static name = 'team';\n  static usage = ['create <scope:team> [--otp <otpcode>]', 'destroy <scope:team> [--otp <otpcode>]', 'add <scope:team> <user> [--otp <otpcode>]', 'rm <scope:team> <user> [--otp <otpcode>]', 'ls <scope>|<scope:team>'];\n  static params = ['registry', 'otp', 'parseable', 'json'];\n  static ignoreImplicitWorkspace = false;\n\n  async completion(opts) {\n    const {\n      conf: {\n        argv: {\n          remain: argv\n        }\n      }\n    } = opts;\n    const subcommands = ['create', 'destroy', 'add', 'rm', 'ls'];\n\n    if (argv.length === 2) {\n      return subcommands;\n    }\n\n    if (subcommands.includes(argv[2])) {\n      return [];\n    }\n\n    throw new Error(argv[2] + ' not recognized');\n  }\n\n  async exec(_ref) {\n    let [cmd, entity = '', user = ''] = _ref;\n    // Entities are in the format <scope>:<team>\n    // XXX: \"description\" option to libnpmteam is used as a description of the\n    // team, but in npm's options, this is a boolean meaning \"show the\n    // description in npm search output\".  Hence its being set to null here.\n    await otplease(this.npm, { ...this.npm.flatOptions\n    }, opts => {\n      entity = entity.replace(/^@/, '');\n\n      switch (cmd) {\n        case 'create':\n          return this.create(entity, opts);\n\n        case 'destroy':\n          return this.destroy(entity, opts);\n\n        case 'add':\n          return this.add(entity, user, opts);\n\n        case 'rm':\n          return this.rm(entity, user, opts);\n\n        case 'ls':\n          {\n            const match = entity.match(/[^:]+:.+/);\n\n            if (match) {\n              return this.listUsers(entity, opts);\n            } else {\n              return this.listTeams(entity, opts);\n            }\n          }\n\n        default:\n          throw this.usageError();\n      }\n    });\n  }\n\n  async create(entity, opts) {\n    await libteam.create(entity, opts);\n\n    if (opts.json) {\n      this.npm.output(JSON.stringify({\n        created: true,\n        team: entity\n      }));\n    } else if (opts.parseable) {\n      this.npm.output(`${entity}\\tcreated`);\n    } else if (!this.npm.silent) {\n      this.npm.output(`+@${entity}`);\n    }\n  }\n\n  async destroy(entity, opts) {\n    await libteam.destroy(entity, opts);\n\n    if (opts.json) {\n      this.npm.output(JSON.stringify({\n        deleted: true,\n        team: entity\n      }));\n    } else if (opts.parseable) {\n      this.npm.output(`${entity}\\tdeleted`);\n    } else if (!this.npm.silent) {\n      this.npm.output(`-@${entity}`);\n    }\n  }\n\n  async add(entity, user, opts) {\n    await libteam.add(user, entity, opts);\n\n    if (opts.json) {\n      this.npm.output(JSON.stringify({\n        added: true,\n        team: entity,\n        user\n      }));\n    } else if (opts.parseable) {\n      this.npm.output(`${user}\\t${entity}\\tadded`);\n    } else if (!this.npm.silent) {\n      this.npm.output(`${user} added to @${entity}`);\n    }\n  }\n\n  async rm(entity, user, opts) {\n    await libteam.rm(user, entity, opts);\n\n    if (opts.json) {\n      this.npm.output(JSON.stringify({\n        removed: true,\n        team: entity,\n        user\n      }));\n    } else if (opts.parseable) {\n      this.npm.output(`${user}\\t${entity}\\tremoved`);\n    } else if (!this.npm.silent) {\n      this.npm.output(`${user} removed from @${entity}`);\n    }\n  }\n\n  async listUsers(entity, opts) {\n    const users = (await libteam.lsUsers(entity, opts)).sort();\n\n    if (opts.json) {\n      this.npm.output(JSON.stringify(users, null, 2));\n    } else if (opts.parseable) {\n      this.npm.output(users.join('\\n'));\n    } else if (!this.npm.silent) {\n      const plural = users.length === 1 ? '' : 's';\n      const more = users.length === 0 ? '' : ':\\n';\n      this.npm.output(`\\n@${entity} has ${users.length} user${plural}${more}`);\n      this.npm.output(columns(users, {\n        padding: 1\n      }));\n    }\n  }\n\n  async listTeams(entity, opts) {\n    const teams = (await libteam.lsTeams(entity, opts)).sort();\n\n    if (opts.json) {\n      this.npm.output(JSON.stringify(teams, null, 2));\n    } else if (opts.parseable) {\n      this.npm.output(teams.join('\\n'));\n    } else if (!this.npm.silent) {\n      const plural = teams.length === 1 ? '' : 's';\n      const more = teams.length === 0 ? '' : ':\\n';\n      this.npm.output(`\\n@${entity} has ${teams.length} team${plural}${more}`);\n      this.npm.output(columns(teams.map(t => `@${t}`), {\n        padding: 1\n      }));\n    }\n  }\n\n}\n\nmodule.exports = Team;","map":{"version":3,"names":["columns","require","libteam","otplease","BaseCommand","Team","description","name","usage","params","ignoreImplicitWorkspace","completion","opts","conf","argv","remain","subcommands","length","includes","Error","exec","cmd","entity","user","npm","flatOptions","replace","create","destroy","add","rm","match","listUsers","listTeams","usageError","json","output","JSON","stringify","created","team","parseable","silent","deleted","added","removed","users","lsUsers","sort","join","plural","more","padding","teams","lsTeams","map","t","module","exports"],"sources":["/Users/chelsea/Documents/0_AllCoding/shoppingstories-v3/node_modules/npm/lib/commands/team.js"],"sourcesContent":["const columns = require('cli-columns')\nconst libteam = require('libnpmteam')\n\nconst otplease = require('../utils/otplease.js')\n\nconst BaseCommand = require('../base-command.js')\nclass Team extends BaseCommand {\n  static description = 'Manage organization teams and team memberships'\n  static name = 'team'\n  static usage = [\n    'create <scope:team> [--otp <otpcode>]',\n    'destroy <scope:team> [--otp <otpcode>]',\n    'add <scope:team> <user> [--otp <otpcode>]',\n    'rm <scope:team> <user> [--otp <otpcode>]',\n    'ls <scope>|<scope:team>',\n  ]\n\n  static params = [\n    'registry',\n    'otp',\n    'parseable',\n    'json',\n  ]\n\n  static ignoreImplicitWorkspace = false\n\n  async completion (opts) {\n    const { conf: { argv: { remain: argv } } } = opts\n    const subcommands = ['create', 'destroy', 'add', 'rm', 'ls']\n\n    if (argv.length === 2) {\n      return subcommands\n    }\n\n    if (subcommands.includes(argv[2])) {\n      return []\n    }\n\n    throw new Error(argv[2] + ' not recognized')\n  }\n\n  async exec ([cmd, entity = '', user = '']) {\n    // Entities are in the format <scope>:<team>\n    // XXX: \"description\" option to libnpmteam is used as a description of the\n    // team, but in npm's options, this is a boolean meaning \"show the\n    // description in npm search output\".  Hence its being set to null here.\n    await otplease(this.npm, { ...this.npm.flatOptions }, opts => {\n      entity = entity.replace(/^@/, '')\n      switch (cmd) {\n        case 'create': return this.create(entity, opts)\n        case 'destroy': return this.destroy(entity, opts)\n        case 'add': return this.add(entity, user, opts)\n        case 'rm': return this.rm(entity, user, opts)\n        case 'ls': {\n          const match = entity.match(/[^:]+:.+/)\n          if (match) {\n            return this.listUsers(entity, opts)\n          } else {\n            return this.listTeams(entity, opts)\n          }\n        }\n        default:\n          throw this.usageError()\n      }\n    })\n  }\n\n  async create (entity, opts) {\n    await libteam.create(entity, opts)\n    if (opts.json) {\n      this.npm.output(JSON.stringify({\n        created: true,\n        team: entity,\n      }))\n    } else if (opts.parseable) {\n      this.npm.output(`${entity}\\tcreated`)\n    } else if (!this.npm.silent) {\n      this.npm.output(`+@${entity}`)\n    }\n  }\n\n  async destroy (entity, opts) {\n    await libteam.destroy(entity, opts)\n    if (opts.json) {\n      this.npm.output(JSON.stringify({\n        deleted: true,\n        team: entity,\n      }))\n    } else if (opts.parseable) {\n      this.npm.output(`${entity}\\tdeleted`)\n    } else if (!this.npm.silent) {\n      this.npm.output(`-@${entity}`)\n    }\n  }\n\n  async add (entity, user, opts) {\n    await libteam.add(user, entity, opts)\n    if (opts.json) {\n      this.npm.output(JSON.stringify({\n        added: true,\n        team: entity,\n        user,\n      }))\n    } else if (opts.parseable) {\n      this.npm.output(`${user}\\t${entity}\\tadded`)\n    } else if (!this.npm.silent) {\n      this.npm.output(`${user} added to @${entity}`)\n    }\n  }\n\n  async rm (entity, user, opts) {\n    await libteam.rm(user, entity, opts)\n    if (opts.json) {\n      this.npm.output(JSON.stringify({\n        removed: true,\n        team: entity,\n        user,\n      }))\n    } else if (opts.parseable) {\n      this.npm.output(`${user}\\t${entity}\\tremoved`)\n    } else if (!this.npm.silent) {\n      this.npm.output(`${user} removed from @${entity}`)\n    }\n  }\n\n  async listUsers (entity, opts) {\n    const users = (await libteam.lsUsers(entity, opts)).sort()\n    if (opts.json) {\n      this.npm.output(JSON.stringify(users, null, 2))\n    } else if (opts.parseable) {\n      this.npm.output(users.join('\\n'))\n    } else if (!this.npm.silent) {\n      const plural = users.length === 1 ? '' : 's'\n      const more = users.length === 0 ? '' : ':\\n'\n      this.npm.output(`\\n@${entity} has ${users.length} user${plural}${more}`)\n      this.npm.output(columns(users, { padding: 1 }))\n    }\n  }\n\n  async listTeams (entity, opts) {\n    const teams = (await libteam.lsTeams(entity, opts)).sort()\n    if (opts.json) {\n      this.npm.output(JSON.stringify(teams, null, 2))\n    } else if (opts.parseable) {\n      this.npm.output(teams.join('\\n'))\n    } else if (!this.npm.silent) {\n      const plural = teams.length === 1 ? '' : 's'\n      const more = teams.length === 0 ? '' : ':\\n'\n      this.npm.output(`\\n@${entity} has ${teams.length} team${plural}${more}`)\n      this.npm.output(columns(teams.map(t => `@${t}`), { padding: 1 }))\n    }\n  }\n}\nmodule.exports = Team\n"],"mappings":"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"},"metadata":{},"sourceType":"script"}