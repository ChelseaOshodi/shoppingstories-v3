{"ast":null,"code":"'use strict';\n\nconst eu = encodeURIComponent;\n\nconst fetch = require('npm-registry-fetch');\n\nconst validate = require('aproba'); // From https://github.com/npm/registry/blob/master/docs/orgs/memberships.md\n\n\nconst cmd = module.exports;\n\nclass MembershipDetail {}\n\ncmd.set = function (org, user, role) {\n  let opts = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n\n  if (typeof role === 'object' && Object.keys(opts).length === 0) {\n    opts = role;\n    role = undefined;\n  }\n\n  validate('SSSO|SSZO', [org, user, role, opts]);\n  user = user.replace(/^@?/, '');\n  org = org.replace(/^@?/, '');\n  return fetch.json(`/-/org/${eu(org)}/user`, { ...opts,\n    method: 'PUT',\n    body: {\n      user,\n      role\n    }\n  }).then(ret => Object.assign(new MembershipDetail(), ret));\n};\n\ncmd.rm = function (org, user) {\n  let opts = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  validate('SSO', [org, user, opts]);\n  user = user.replace(/^@?/, '');\n  org = org.replace(/^@?/, '');\n  return fetch(`/-/org/${eu(org)}/user`, { ...opts,\n    method: 'DELETE',\n    body: {\n      user\n    },\n    ignoreBody: true\n  }).then(() => null);\n};\n\nclass Roster {}\n\ncmd.ls = function (org) {\n  let opts = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  return cmd.ls.stream(org, opts).collect().then(data => data.reduce((acc, _ref) => {\n    let [key, val] = _ref;\n\n    if (!acc) {\n      acc = {};\n    }\n\n    acc[key] = val;\n    return acc;\n  }, null)).then(ret => Object.assign(new Roster(), ret));\n};\n\ncmd.ls.stream = function (org) {\n  let opts = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  validate('SO', [org, opts]);\n  org = org.replace(/^@?/, '');\n  return fetch.json.stream(`/-/org/${eu(org)}/user`, '*', { ...opts,\n    mapJSON: (value, _ref2) => {\n      let [key] = _ref2;\n      return [key, value];\n    }\n  });\n};","map":{"version":3,"names":["eu","encodeURIComponent","fetch","require","validate","cmd","module","exports","MembershipDetail","set","org","user","role","opts","Object","keys","length","undefined","replace","json","method","body","then","ret","assign","rm","ignoreBody","Roster","ls","stream","collect","data","reduce","acc","key","val","mapJSON","value"],"sources":["/Users/chelsea/Documents/0_AllCoding/shoppingstories-v3/node_modules/npm/node_modules/libnpmorg/lib/index.js"],"sourcesContent":["'use strict'\n\nconst eu = encodeURIComponent\nconst fetch = require('npm-registry-fetch')\nconst validate = require('aproba')\n\n// From https://github.com/npm/registry/blob/master/docs/orgs/memberships.md\nconst cmd = module.exports\n\nclass MembershipDetail {}\ncmd.set = (org, user, role, opts = {}) => {\n  if (\n    typeof role === 'object' &&\n    Object.keys(opts).length === 0\n  ) {\n    opts = role\n    role = undefined\n  }\n  validate('SSSO|SSZO', [org, user, role, opts])\n  user = user.replace(/^@?/, '')\n  org = org.replace(/^@?/, '')\n  return fetch.json(`/-/org/${eu(org)}/user`, {\n    ...opts,\n    method: 'PUT',\n    body: { user, role },\n  }).then(ret => Object.assign(new MembershipDetail(), ret))\n}\n\ncmd.rm = (org, user, opts = {}) => {\n  validate('SSO', [org, user, opts])\n  user = user.replace(/^@?/, '')\n  org = org.replace(/^@?/, '')\n  return fetch(`/-/org/${eu(org)}/user`, {\n    ...opts,\n    method: 'DELETE',\n    body: { user },\n    ignoreBody: true,\n  }).then(() => null)\n}\n\nclass Roster {}\ncmd.ls = (org, opts = {}) => {\n  return cmd.ls.stream(org, opts)\n    .collect()\n    .then(data => data.reduce((acc, [key, val]) => {\n      if (!acc) {\n        acc = {}\n      }\n      acc[key] = val\n      return acc\n    }, null))\n    .then(ret => Object.assign(new Roster(), ret))\n}\n\ncmd.ls.stream = (org, opts = {}) => {\n  validate('SO', [org, opts])\n  org = org.replace(/^@?/, '')\n  return fetch.json.stream(`/-/org/${eu(org)}/user`, '*', {\n    ...opts,\n    mapJSON: (value, [key]) => {\n      return [key, value]\n    },\n  })\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"script"}