{"ast":null,"code":"const git = require('@npmcli/git');\n\nconst log = require('proc-log'); // returns true if it's cool to do git stuff\n// throws if it's unclean, and not forced.\n\n\nmodule.exports = async opts => {\n  const {\n    force\n  } = opts;\n  let hadError = false;\n  const clean = await git.isClean(opts).catch(er => {\n    if (er.code === 'ENOGIT') {\n      log.warn('version', 'This is a Git checkout, but the git command was not found.', 'npm could not create a Git tag for this release!');\n      hadError = true; // how can merges be real if our git isn't real?\n\n      return true;\n    } else {\n      throw er;\n    }\n  });\n\n  if (!clean) {\n    if (!force) {\n      throw new Error('Git working directory not clean.');\n    }\n\n    log.warn('version', 'Git working directory not clean, proceeding forcefully.');\n  }\n\n  return !hadError;\n};","map":{"version":3,"names":["git","require","log","module","exports","opts","force","hadError","clean","isClean","catch","er","code","warn","Error"],"sources":["/Users/chelsea/Documents/0_AllCoding/shoppingstories-v3/node_modules/npm/node_modules/libnpmversion/lib/enforce-clean.js"],"sourcesContent":["const git = require('@npmcli/git')\nconst log = require('proc-log')\n\n// returns true if it's cool to do git stuff\n// throws if it's unclean, and not forced.\nmodule.exports = async opts => {\n  const { force } = opts\n  let hadError = false\n  const clean = await git.isClean(opts).catch(er => {\n    if (er.code === 'ENOGIT') {\n      log.warn(\n        'version',\n        'This is a Git checkout, but the git command was not found.',\n        'npm could not create a Git tag for this release!'\n      )\n      hadError = true\n      // how can merges be real if our git isn't real?\n      return true\n    } else {\n      throw er\n    }\n  })\n\n  if (!clean) {\n    if (!force) {\n      throw new Error('Git working directory not clean.')\n    }\n    log.warn('version', 'Git working directory not clean, proceeding forcefully.')\n  }\n\n  return !hadError\n}\n"],"mappings":"AAAA,MAAMA,GAAG,GAAGC,OAAO,CAAC,aAAD,CAAnB;;AACA,MAAMC,GAAG,GAAGD,OAAO,CAAC,UAAD,CAAnB,C,CAEA;AACA;;;AACAE,MAAM,CAACC,OAAP,GAAiB,MAAMC,IAAN,IAAc;EAC7B,MAAM;IAAEC;EAAF,IAAYD,IAAlB;EACA,IAAIE,QAAQ,GAAG,KAAf;EACA,MAAMC,KAAK,GAAG,MAAMR,GAAG,CAACS,OAAJ,CAAYJ,IAAZ,EAAkBK,KAAlB,CAAwBC,EAAE,IAAI;IAChD,IAAIA,EAAE,CAACC,IAAH,KAAY,QAAhB,EAA0B;MACxBV,GAAG,CAACW,IAAJ,CACE,SADF,EAEE,4DAFF,EAGE,kDAHF;MAKAN,QAAQ,GAAG,IAAX,CANwB,CAOxB;;MACA,OAAO,IAAP;IACD,CATD,MASO;MACL,MAAMI,EAAN;IACD;EACF,CAbmB,CAApB;;EAeA,IAAI,CAACH,KAAL,EAAY;IACV,IAAI,CAACF,KAAL,EAAY;MACV,MAAM,IAAIQ,KAAJ,CAAU,kCAAV,CAAN;IACD;;IACDZ,GAAG,CAACW,IAAJ,CAAS,SAAT,EAAoB,yDAApB;EACD;;EAED,OAAO,CAACN,QAAR;AACD,CA1BD"},"metadata":{},"sourceType":"script"}