{"ast":null,"code":"const getAuth = require('npm-registry-fetch/lib/auth.js');\n\nconst npmFetch = require('npm-registry-fetch');\n\nconst log = require('../utils/log-shim');\n\nconst BaseCommand = require('../base-command.js');\n\nclass Logout extends BaseCommand {\n  static description = 'Log out of the registry';\n  static name = 'logout';\n  static params = ['registry', 'scope'];\n  static ignoreImplicitWorkspace = true;\n\n  async exec(args) {\n    const registry = this.npm.config.get('registry');\n    const scope = this.npm.config.get('scope');\n    const regRef = scope ? `${scope}:registry` : 'registry';\n    const reg = this.npm.config.get(regRef) || registry;\n    const auth = getAuth(reg, this.npm.flatOptions);\n\n    if (auth.token) {\n      log.verbose('logout', `clearing token for ${reg}`);\n      await npmFetch(`/-/user/token/${encodeURIComponent(auth.token)}`, { ...this.npm.flatOptions,\n        method: 'DELETE',\n        ignoreBody: true\n      });\n    } else if (auth.isBasicAuth) {\n      log.verbose('logout', `clearing user credentials for ${reg}`);\n    } else {\n      const msg = `not logged in to ${reg}, so can't log out!`;\n      throw Object.assign(new Error(msg), {\n        code: 'ENEEDAUTH'\n      });\n    }\n\n    if (scope) {\n      this.npm.config.delete(regRef, 'user');\n    }\n\n    this.npm.config.clearCredentialsByURI(reg);\n    await this.npm.config.save('user');\n  }\n\n}\n\nmodule.exports = Logout;","map":{"version":3,"names":["getAuth","require","npmFetch","log","BaseCommand","Logout","description","name","params","ignoreImplicitWorkspace","exec","args","registry","npm","config","get","scope","regRef","reg","auth","flatOptions","token","verbose","encodeURIComponent","method","ignoreBody","isBasicAuth","msg","Object","assign","Error","code","delete","clearCredentialsByURI","save","module","exports"],"sources":["/Users/chelsea/Documents/0_AllCoding/shoppingstories-v3/node_modules/npm/lib/commands/logout.js"],"sourcesContent":["const getAuth = require('npm-registry-fetch/lib/auth.js')\nconst npmFetch = require('npm-registry-fetch')\nconst log = require('../utils/log-shim')\nconst BaseCommand = require('../base-command.js')\n\nclass Logout extends BaseCommand {\n  static description = 'Log out of the registry'\n  static name = 'logout'\n  static params = [\n    'registry',\n    'scope',\n  ]\n\n  static ignoreImplicitWorkspace = true\n\n  async exec (args) {\n    const registry = this.npm.config.get('registry')\n    const scope = this.npm.config.get('scope')\n    const regRef = scope ? `${scope}:registry` : 'registry'\n    const reg = this.npm.config.get(regRef) || registry\n\n    const auth = getAuth(reg, this.npm.flatOptions)\n\n    if (auth.token) {\n      log.verbose('logout', `clearing token for ${reg}`)\n      await npmFetch(`/-/user/token/${encodeURIComponent(auth.token)}`, {\n        ...this.npm.flatOptions,\n        method: 'DELETE',\n        ignoreBody: true,\n      })\n    } else if (auth.isBasicAuth) {\n      log.verbose('logout', `clearing user credentials for ${reg}`)\n    } else {\n      const msg = `not logged in to ${reg}, so can't log out!`\n      throw Object.assign(new Error(msg), { code: 'ENEEDAUTH' })\n    }\n\n    if (scope) {\n      this.npm.config.delete(regRef, 'user')\n    }\n\n    this.npm.config.clearCredentialsByURI(reg)\n\n    await this.npm.config.save('user')\n  }\n}\nmodule.exports = Logout\n"],"mappings":"AAAA,MAAMA,OAAO,GAAGC,OAAO,CAAC,gCAAD,CAAvB;;AACA,MAAMC,QAAQ,GAAGD,OAAO,CAAC,oBAAD,CAAxB;;AACA,MAAME,GAAG,GAAGF,OAAO,CAAC,mBAAD,CAAnB;;AACA,MAAMG,WAAW,GAAGH,OAAO,CAAC,oBAAD,CAA3B;;AAEA,MAAMI,MAAN,SAAqBD,WAArB,CAAiC;EACb,OAAXE,WAAW,GAAG,yBAAH;EACP,OAAJC,IAAI,GAAG,QAAH;EACE,OAANC,MAAM,GAAG,CACd,UADc,EAEd,OAFc,CAAH;EAKiB,OAAvBC,uBAAuB,GAAG,IAAH;;EAEpB,MAAJC,IAAI,CAAEC,IAAF,EAAQ;IAChB,MAAMC,QAAQ,GAAG,KAAKC,GAAL,CAASC,MAAT,CAAgBC,GAAhB,CAAoB,UAApB,CAAjB;IACA,MAAMC,KAAK,GAAG,KAAKH,GAAL,CAASC,MAAT,CAAgBC,GAAhB,CAAoB,OAApB,CAAd;IACA,MAAME,MAAM,GAAGD,KAAK,GAAI,GAAEA,KAAM,WAAZ,GAAyB,UAA7C;IACA,MAAME,GAAG,GAAG,KAAKL,GAAL,CAASC,MAAT,CAAgBC,GAAhB,CAAoBE,MAApB,KAA+BL,QAA3C;IAEA,MAAMO,IAAI,GAAGnB,OAAO,CAACkB,GAAD,EAAM,KAAKL,GAAL,CAASO,WAAf,CAApB;;IAEA,IAAID,IAAI,CAACE,KAAT,EAAgB;MACdlB,GAAG,CAACmB,OAAJ,CAAY,QAAZ,EAAuB,sBAAqBJ,GAAI,EAAhD;MACA,MAAMhB,QAAQ,CAAE,iBAAgBqB,kBAAkB,CAACJ,IAAI,CAACE,KAAN,CAAa,EAAjD,EAAoD,EAChE,GAAG,KAAKR,GAAL,CAASO,WADoD;QAEhEI,MAAM,EAAE,QAFwD;QAGhEC,UAAU,EAAE;MAHoD,CAApD,CAAd;IAKD,CAPD,MAOO,IAAIN,IAAI,CAACO,WAAT,EAAsB;MAC3BvB,GAAG,CAACmB,OAAJ,CAAY,QAAZ,EAAuB,iCAAgCJ,GAAI,EAA3D;IACD,CAFM,MAEA;MACL,MAAMS,GAAG,GAAI,oBAAmBT,GAAI,qBAApC;MACA,MAAMU,MAAM,CAACC,MAAP,CAAc,IAAIC,KAAJ,CAAUH,GAAV,CAAd,EAA8B;QAAEI,IAAI,EAAE;MAAR,CAA9B,CAAN;IACD;;IAED,IAAIf,KAAJ,EAAW;MACT,KAAKH,GAAL,CAASC,MAAT,CAAgBkB,MAAhB,CAAuBf,MAAvB,EAA+B,MAA/B;IACD;;IAED,KAAKJ,GAAL,CAASC,MAAT,CAAgBmB,qBAAhB,CAAsCf,GAAtC;IAEA,MAAM,KAAKL,GAAL,CAASC,MAAT,CAAgBoB,IAAhB,CAAqB,MAArB,CAAN;EACD;;AAvC8B;;AAyCjCC,MAAM,CAACC,OAAP,GAAiB/B,MAAjB"},"metadata":{},"sourceType":"script"}