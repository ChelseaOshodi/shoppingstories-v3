{"ast":null,"code":"/* eslint-disable no-console */\n// XXX: remove console.log later\n// npm view [pkg [pkg ...]]\nconst chalk = require('chalk');\n\nconst columns = require('cli-columns');\n\nconst fs = require('fs');\n\nconst jsonParse = require('json-parse-even-better-errors');\n\nconst log = require('../utils/log-shim.js');\n\nconst npa = require('npm-package-arg');\n\nconst {\n  resolve\n} = require('path');\n\nconst formatBytes = require('../utils/format-bytes.js');\n\nconst relativeDate = require('tiny-relative-date');\n\nconst semver = require('semver');\n\nconst {\n  inspect,\n  promisify\n} = require('util');\n\nconst {\n  packument\n} = require('pacote');\n\nconst readFile = promisify(fs.readFile);\n\nconst readJson = async file => jsonParse(await readFile(file, 'utf8'));\n\nconst Queryable = require('../utils/queryable.js');\n\nconst BaseCommand = require('../base-command.js');\n\nclass View extends BaseCommand {\n  static description = 'View registry info';\n  static name = 'view';\n  static params = ['json', 'workspace', 'workspaces', 'include-workspace-root'];\n  static ignoreImplicitWorkspace = false;\n  static usage = ['[<package-spec>] [<field>[.subfield]...]'];\n\n  async completion(opts) {\n    if (opts.conf.argv.remain.length <= 2) {\n      // There used to be registry completion here, but it stopped\n      // making sense somewhere around 50,000 packages on the registry\n      return;\n    } // have the package, get the fields\n\n\n    const config = { ...this.npm.flatOptions,\n      fullMetadata: true,\n      preferOnline: true\n    };\n    const spec = npa(opts.conf.argv.remain[2]);\n    const pckmnt = await packument(spec, config);\n    const defaultTag = this.npm.config.get('tag');\n    const dv = pckmnt.versions[pckmnt['dist-tags'][defaultTag]];\n    pckmnt.versions = Object.keys(pckmnt.versions).sort(semver.compareLoose);\n    return getFields(pckmnt).concat(getFields(dv));\n\n    function getFields(d, f, pref) {\n      f = f || [];\n      pref = pref || [];\n      Object.keys(d).forEach(k => {\n        if (k.charAt(0) === '_' || k.indexOf('.') !== -1) {\n          return;\n        }\n\n        const p = pref.concat(k).join('.');\n        f.push(p);\n\n        if (Array.isArray(d[k])) {\n          d[k].forEach((val, i) => {\n            const pi = p + '[' + i + ']';\n\n            if (val && typeof val === 'object') {\n              getFields(val, f, [p]);\n            } else {\n              f.push(pi);\n            }\n          });\n          return;\n        }\n\n        if (typeof d[k] === 'object') {\n          getFields(d[k], f, [p]);\n        }\n      });\n      return f;\n    }\n  }\n\n  async exec(args) {\n    if (!args.length) {\n      args = ['.'];\n    }\n\n    let pkg = args.shift();\n    const local = /^\\.@/.test(pkg) || pkg === '.';\n\n    if (local) {\n      if (this.npm.global) {\n        throw new Error('Cannot use view command in global mode.');\n      }\n\n      const dir = this.npm.prefix;\n      const manifest = await readJson(resolve(dir, 'package.json'));\n\n      if (!manifest.name) {\n        throw new Error('Invalid package.json, no \"name\" field');\n      } // put the version back if it existed\n\n\n      pkg = `${manifest.name}${pkg.slice(1)}`;\n    }\n\n    let wholePackument = false;\n\n    if (!args.length) {\n      args = [''];\n      wholePackument = true;\n    }\n\n    const [pckmnt, data] = await this.getData(pkg, args);\n\n    if (!this.npm.config.get('json') && wholePackument) {\n      // pretty view (entire packument)\n      data.map(v => this.prettyView(pckmnt, v[Object.keys(v)[0]]['']));\n    } else {\n      // JSON formatted output (JSON or specific attributes from packument)\n      let reducedData = data.reduce(reducer, {});\n\n      if (wholePackument) {\n        // No attributes\n        reducedData = cleanBlanks(reducedData);\n        log.silly('view', reducedData);\n      } // disable the progress bar entirely, as we can't meaningfully update it\n      // if we may have partial lines printed.\n\n\n      log.disableProgress();\n      const msg = await this.jsonData(reducedData, pckmnt._id);\n\n      if (msg !== '') {\n        console.log(msg);\n      }\n    }\n  }\n\n  async execWorkspaces(args, filters) {\n    if (!args.length) {\n      args = ['.'];\n    }\n\n    const pkg = args.shift();\n    const local = /^\\.@/.test(pkg) || pkg === '.';\n\n    if (!local) {\n      log.warn('Ignoring workspaces for specified package(s)');\n      return this.exec([pkg, ...args]);\n    }\n\n    let wholePackument = false;\n\n    if (!args.length) {\n      wholePackument = true;\n      args = ['']; // getData relies on this\n    }\n\n    const results = {};\n    await this.setWorkspaces(filters);\n\n    for (const name of this.workspaceNames) {\n      const wsPkg = `${name}${pkg.slice(1)}`;\n      const [pckmnt, data] = await this.getData(wsPkg, args);\n      let reducedData = data.reduce(reducer, {});\n\n      if (wholePackument) {\n        // No attributes\n        reducedData = cleanBlanks(reducedData);\n        log.silly('view', reducedData);\n      }\n\n      if (!this.npm.config.get('json')) {\n        if (wholePackument) {\n          data.map(v => this.prettyView(pckmnt, v[Object.keys(v)[0]]['']));\n        } else {\n          console.log(`${name}:`);\n          const msg = await this.jsonData(reducedData, pckmnt._id);\n\n          if (msg !== '') {\n            console.log(msg);\n          }\n        }\n      } else {\n        const msg = await this.jsonData(reducedData, pckmnt._id);\n\n        if (msg !== '') {\n          results[name] = JSON.parse(msg);\n        }\n      }\n    }\n\n    if (Object.keys(results).length > 0) {\n      console.log(JSON.stringify(results, null, 2));\n    }\n  }\n\n  async getData(pkg, args) {\n    const opts = { ...this.npm.flatOptions,\n      preferOnline: true,\n      fullMetadata: true\n    };\n    const spec = npa(pkg); // get the data about this package\n\n    let version = this.npm.config.get('tag'); // rawSpec is the git url if this is from git\n\n    if (spec.type !== 'git' && spec.type !== 'directory' && spec.rawSpec) {\n      version = spec.rawSpec;\n    }\n\n    const pckmnt = await packument(spec, opts);\n\n    if (pckmnt['dist-tags'] && pckmnt['dist-tags'][version]) {\n      version = pckmnt['dist-tags'][version];\n    }\n\n    if (pckmnt.time && pckmnt.time.unpublished) {\n      const u = pckmnt.time.unpublished;\n      const er = new Error(`Unpublished on ${u.time}`);\n      er.statusCode = 404;\n      er.code = 'E404';\n      er.pkgid = pckmnt._id;\n      throw er;\n    }\n\n    const data = [];\n    const versions = pckmnt.versions || {};\n    pckmnt.versions = Object.keys(versions).sort(semver.compareLoose); // remove readme unless we asked for it\n\n    if (args.indexOf('readme') === -1) {\n      delete pckmnt.readme;\n    }\n\n    Object.keys(versions).forEach(v => {\n      if (semver.satisfies(v, version, true)) {\n        args.forEach(arg => {\n          // remove readme unless we asked for it\n          if (args.indexOf('readme') !== -1) {\n            delete versions[v].readme;\n          }\n\n          data.push(showFields(pckmnt, versions[v], arg));\n        });\n      }\n    }); // No data has been pushed because no data is matching the specified version\n\n    if (data.length === 0 && version !== 'latest') {\n      const er = new Error(`No match found for version ${version}`);\n      er.statusCode = 404;\n      er.code = 'E404';\n      er.pkgid = `${pckmnt._id}@${version}`;\n      throw er;\n    }\n\n    if (!this.npm.config.get('json') && args.length === 1 && args[0] === '') {\n      pckmnt.version = version;\n    }\n\n    return [pckmnt, data];\n  }\n\n  async jsonData(data, name) {\n    const versions = Object.keys(data);\n    let msg = '';\n    let msgJson = [];\n    const includeVersions = versions.length > 1;\n    let includeFields;\n    const json = this.npm.config.get('json');\n    versions.forEach(v => {\n      const fields = Object.keys(data[v]);\n      includeFields = includeFields || fields.length > 1;\n\n      if (json) {\n        msgJson.push({});\n      }\n\n      fields.forEach(f => {\n        let d = cleanup(data[v][f]);\n\n        if (fields.length === 1 && json) {\n          msgJson[msgJson.length - 1][f] = d;\n        }\n\n        if (includeVersions || includeFields || typeof d !== 'string') {\n          if (json) {\n            msgJson[msgJson.length - 1][f] = d;\n          } else {\n            d = inspect(d, {\n              showHidden: false,\n              depth: 5,\n              colors: this.npm.color,\n              maxArrayLength: null\n            });\n          }\n        } else if (typeof d === 'string' && json) {\n          d = JSON.stringify(d);\n        }\n\n        if (!json) {\n          if (f && includeFields) {\n            f += ' = ';\n          }\n\n          msg += (includeVersions ? name + '@' + v + ' ' : '') + (includeFields ? f : '') + d + '\\n';\n        }\n      });\n    });\n\n    if (json) {\n      if (msgJson.length && Object.keys(msgJson[0]).length === 1) {\n        const k = Object.keys(msgJson[0])[0];\n        msgJson = msgJson.map(m => m[k]);\n      }\n\n      if (msgJson.length === 1) {\n        msg = JSON.stringify(msgJson[0], null, 2) + '\\n';\n      } else if (msgJson.length > 1) {\n        msg = JSON.stringify(msgJson, null, 2) + '\\n';\n      }\n    }\n\n    return msg.trim();\n  }\n\n  prettyView(packument, manifest) {\n    // More modern, pretty printing of default view\n    const unicode = this.npm.config.get('unicode');\n    const tags = [];\n    Object.keys(packument['dist-tags']).forEach(t => {\n      const version = packument['dist-tags'][t];\n      tags.push(`${chalk.bold.green(t)}: ${version}`);\n    });\n    const unpackedSize = manifest.dist.unpackedSize && formatBytes(manifest.dist.unpackedSize, true);\n    const licenseField = manifest.license || 'Proprietary';\n    const info = {\n      name: chalk.green(manifest.name),\n      version: chalk.green(manifest.version),\n      bins: Object.keys(manifest.bin || {}),\n      versions: chalk.yellow(packument.versions.length + ''),\n      description: manifest.description,\n      deprecated: manifest.deprecated,\n      keywords: packument.keywords || [],\n      license: typeof licenseField === 'string' ? licenseField : licenseField.type || 'Proprietary',\n      deps: Object.keys(manifest.dependencies || {}).map(dep => {\n        return `${chalk.yellow(dep)}: ${manifest.dependencies[dep]}`;\n      }),\n      publisher: manifest._npmUser && unparsePerson({\n        name: chalk.yellow(manifest._npmUser.name),\n        email: chalk.cyan(manifest._npmUser.email)\n      }),\n      modified: !packument.time ? undefined : chalk.yellow(relativeDate(packument.time[manifest.version])),\n      maintainers: (packument.maintainers || []).map(u => unparsePerson({\n        name: chalk.yellow(u.name),\n        email: chalk.cyan(u.email)\n      })),\n      repo: manifest.bugs && (manifest.bugs.url || manifest.bugs) || manifest.repository && (manifest.repository.url || manifest.repository),\n      site: manifest.homepage && (manifest.homepage.url || manifest.homepage),\n      tags,\n      tarball: chalk.cyan(manifest.dist.tarball),\n      shasum: chalk.yellow(manifest.dist.shasum),\n      integrity: manifest.dist.integrity && chalk.yellow(manifest.dist.integrity),\n      fileCount: manifest.dist.fileCount && chalk.yellow(manifest.dist.fileCount),\n      unpackedSize: unpackedSize && chalk.yellow(unpackedSize)\n    };\n\n    if (info.license.toLowerCase().trim() === 'proprietary') {\n      info.license = chalk.bold.red(info.license);\n    } else {\n      info.license = chalk.green(info.license);\n    }\n\n    console.log('');\n    console.log(chalk.underline.bold(`${info.name}@${info.version}`) + ' | ' + info.license + ' | deps: ' + (info.deps.length ? chalk.cyan(info.deps.length) : chalk.green('none')) + ' | versions: ' + info.versions);\n    info.description && console.log(info.description);\n\n    if (info.repo || info.site) {\n      info.site && console.log(chalk.cyan(info.site));\n    }\n\n    const warningSign = unicode ? ' ⚠️ ' : '!!';\n    info.deprecated && console.log(`\\n${chalk.bold.red('DEPRECATED')}${warningSign} - ${info.deprecated}`);\n\n    if (info.keywords.length) {\n      console.log('');\n      console.log('keywords:', chalk.yellow(info.keywords.join(', ')));\n    }\n\n    if (info.bins.length) {\n      console.log('');\n      console.log('bin:', chalk.yellow(info.bins.join(', ')));\n    }\n\n    console.log('');\n    console.log('dist');\n    console.log('.tarball:', info.tarball);\n    console.log('.shasum:', info.shasum);\n    info.integrity && console.log('.integrity:', info.integrity);\n    info.unpackedSize && console.log('.unpackedSize:', info.unpackedSize);\n    const maxDeps = 24;\n\n    if (info.deps.length) {\n      console.log('');\n      console.log('dependencies:');\n      console.log(columns(info.deps.slice(0, maxDeps), {\n        padding: 1\n      }));\n\n      if (info.deps.length > maxDeps) {\n        console.log(`(...and ${info.deps.length - maxDeps} more.)`);\n      }\n    }\n\n    if (info.maintainers && info.maintainers.length) {\n      console.log('');\n      console.log('maintainers:');\n      info.maintainers.forEach(u => console.log('-', u));\n    }\n\n    console.log('');\n    console.log('dist-tags:');\n    console.log(columns(info.tags));\n\n    if (info.publisher || info.modified) {\n      let publishInfo = 'published';\n\n      if (info.modified) {\n        publishInfo += ` ${info.modified}`;\n      }\n\n      if (info.publisher) {\n        publishInfo += ` by ${info.publisher}`;\n      }\n\n      console.log('');\n      console.log(publishInfo);\n    }\n  }\n\n}\n\nmodule.exports = View;\n\nfunction cleanBlanks(obj) {\n  const clean = {};\n  Object.keys(obj).forEach(version => {\n    clean[version] = obj[version][''];\n  });\n  return clean;\n} // takes an array of objects and merges them into one object\n\n\nfunction reducer(acc, cur) {\n  if (cur) {\n    Object.keys(cur).forEach(v => {\n      acc[v] = acc[v] || {};\n      Object.keys(cur[v]).forEach(t => {\n        acc[v][t] = cur[v][t];\n      });\n    });\n  }\n\n  return acc;\n} // return whatever was printed\n\n\nfunction showFields(data, version, fields) {\n  const o = {};\n  [data, version].forEach(s => {\n    Object.keys(s).forEach(k => {\n      o[k] = s[k];\n    });\n  });\n  const queryable = new Queryable(o);\n  const s = queryable.query(fields);\n  const res = {\n    [version.version]: s\n  };\n\n  if (s) {\n    return res;\n  }\n}\n\nfunction cleanup(data) {\n  if (Array.isArray(data)) {\n    return data.map(cleanup);\n  }\n\n  if (!data || typeof data !== 'object') {\n    return data;\n  }\n\n  const keys = Object.keys(data);\n\n  if (keys.length <= 3 && data.name && (keys.length === 1 || keys.length === 3 && data.email && data.url || keys.length === 2 && (data.email || data.url))) {\n    data = unparsePerson(data);\n  }\n\n  return data;\n}\n\nfunction unparsePerson(d) {\n  return d.name + (d.email ? ' <' + d.email + '>' : '') + (d.url ? ' (' + d.url + ')' : '');\n}","map":{"version":3,"names":["chalk","require","columns","fs","jsonParse","log","npa","resolve","formatBytes","relativeDate","semver","inspect","promisify","packument","readFile","readJson","file","Queryable","BaseCommand","View","description","name","params","ignoreImplicitWorkspace","usage","completion","opts","conf","argv","remain","length","config","npm","flatOptions","fullMetadata","preferOnline","spec","pckmnt","defaultTag","get","dv","versions","Object","keys","sort","compareLoose","getFields","concat","d","f","pref","forEach","k","charAt","indexOf","p","join","push","Array","isArray","val","i","pi","exec","args","pkg","shift","local","test","global","Error","dir","prefix","manifest","slice","wholePackument","data","getData","map","v","prettyView","reducedData","reduce","reducer","cleanBlanks","silly","disableProgress","msg","jsonData","_id","console","execWorkspaces","filters","warn","results","setWorkspaces","workspaceNames","wsPkg","JSON","parse","stringify","version","type","rawSpec","time","unpublished","u","er","statusCode","code","pkgid","readme","satisfies","arg","showFields","msgJson","includeVersions","includeFields","json","fields","cleanup","showHidden","depth","colors","color","maxArrayLength","m","trim","unicode","tags","t","bold","green","unpackedSize","dist","licenseField","license","info","bins","bin","yellow","deprecated","keywords","deps","dependencies","dep","publisher","_npmUser","unparsePerson","email","cyan","modified","undefined","maintainers","repo","bugs","url","repository","site","homepage","tarball","shasum","integrity","fileCount","toLowerCase","red","underline","warningSign","maxDeps","padding","publishInfo","module","exports","obj","clean","acc","cur","o","s","queryable","query","res"],"sources":["/Users/chelsea/Documents/0_AllCoding/shoppingstories-v3/node_modules/npm/lib/commands/view.js"],"sourcesContent":["/* eslint-disable no-console */\n// XXX: remove console.log later\n\n// npm view [pkg [pkg ...]]\n\nconst chalk = require('chalk')\nconst columns = require('cli-columns')\nconst fs = require('fs')\nconst jsonParse = require('json-parse-even-better-errors')\nconst log = require('../utils/log-shim.js')\nconst npa = require('npm-package-arg')\nconst { resolve } = require('path')\nconst formatBytes = require('../utils/format-bytes.js')\nconst relativeDate = require('tiny-relative-date')\nconst semver = require('semver')\nconst { inspect, promisify } = require('util')\nconst { packument } = require('pacote')\n\nconst readFile = promisify(fs.readFile)\nconst readJson = async file => jsonParse(await readFile(file, 'utf8'))\n\nconst Queryable = require('../utils/queryable.js')\nconst BaseCommand = require('../base-command.js')\nclass View extends BaseCommand {\n  static description = 'View registry info'\n  static name = 'view'\n  static params = [\n    'json',\n    'workspace',\n    'workspaces',\n    'include-workspace-root',\n  ]\n\n  static ignoreImplicitWorkspace = false\n\n  static usage = ['[<package-spec>] [<field>[.subfield]...]']\n\n  async completion (opts) {\n    if (opts.conf.argv.remain.length <= 2) {\n      // There used to be registry completion here, but it stopped\n      // making sense somewhere around 50,000 packages on the registry\n      return\n    }\n    // have the package, get the fields\n    const config = {\n      ...this.npm.flatOptions,\n      fullMetadata: true,\n      preferOnline: true,\n    }\n    const spec = npa(opts.conf.argv.remain[2])\n    const pckmnt = await packument(spec, config)\n    const defaultTag = this.npm.config.get('tag')\n    const dv = pckmnt.versions[pckmnt['dist-tags'][defaultTag]]\n    pckmnt.versions = Object.keys(pckmnt.versions).sort(semver.compareLoose)\n\n    return getFields(pckmnt).concat(getFields(dv))\n\n    function getFields (d, f, pref) {\n      f = f || []\n      pref = pref || []\n      Object.keys(d).forEach((k) => {\n        if (k.charAt(0) === '_' || k.indexOf('.') !== -1) {\n          return\n        }\n        const p = pref.concat(k).join('.')\n        f.push(p)\n        if (Array.isArray(d[k])) {\n          d[k].forEach((val, i) => {\n            const pi = p + '[' + i + ']'\n            if (val && typeof val === 'object') {\n              getFields(val, f, [p])\n            } else {\n              f.push(pi)\n            }\n          })\n          return\n        }\n        if (typeof d[k] === 'object') {\n          getFields(d[k], f, [p])\n        }\n      })\n      return f\n    }\n  }\n\n  async exec (args) {\n    if (!args.length) {\n      args = ['.']\n    }\n    let pkg = args.shift()\n    const local = /^\\.@/.test(pkg) || pkg === '.'\n\n    if (local) {\n      if (this.npm.global) {\n        throw new Error('Cannot use view command in global mode.')\n      }\n      const dir = this.npm.prefix\n      const manifest = await readJson(resolve(dir, 'package.json'))\n      if (!manifest.name) {\n        throw new Error('Invalid package.json, no \"name\" field')\n      }\n      // put the version back if it existed\n      pkg = `${manifest.name}${pkg.slice(1)}`\n    }\n\n    let wholePackument = false\n    if (!args.length) {\n      args = ['']\n      wholePackument = true\n    }\n    const [pckmnt, data] = await this.getData(pkg, args)\n\n    if (!this.npm.config.get('json') && wholePackument) {\n      // pretty view (entire packument)\n      data.map((v) => this.prettyView(pckmnt, v[Object.keys(v)[0]]['']))\n    } else {\n      // JSON formatted output (JSON or specific attributes from packument)\n      let reducedData = data.reduce(reducer, {})\n      if (wholePackument) {\n        // No attributes\n        reducedData = cleanBlanks(reducedData)\n        log.silly('view', reducedData)\n      }\n      // disable the progress bar entirely, as we can't meaningfully update it\n      // if we may have partial lines printed.\n      log.disableProgress()\n\n      const msg = await this.jsonData(reducedData, pckmnt._id)\n      if (msg !== '') {\n        console.log(msg)\n      }\n    }\n  }\n\n  async execWorkspaces (args, filters) {\n    if (!args.length) {\n      args = ['.']\n    }\n\n    const pkg = args.shift()\n\n    const local = /^\\.@/.test(pkg) || pkg === '.'\n    if (!local) {\n      log.warn('Ignoring workspaces for specified package(s)')\n      return this.exec([pkg, ...args])\n    }\n    let wholePackument = false\n    if (!args.length) {\n      wholePackument = true\n      args = [''] // getData relies on this\n    }\n    const results = {}\n    await this.setWorkspaces(filters)\n    for (const name of this.workspaceNames) {\n      const wsPkg = `${name}${pkg.slice(1)}`\n      const [pckmnt, data] = await this.getData(wsPkg, args)\n\n      let reducedData = data.reduce(reducer, {})\n      if (wholePackument) {\n        // No attributes\n        reducedData = cleanBlanks(reducedData)\n        log.silly('view', reducedData)\n      }\n\n      if (!this.npm.config.get('json')) {\n        if (wholePackument) {\n          data.map((v) => this.prettyView(pckmnt, v[Object.keys(v)[0]]['']))\n        } else {\n          console.log(`${name}:`)\n          const msg = await this.jsonData(reducedData, pckmnt._id)\n          if (msg !== '') {\n            console.log(msg)\n          }\n        }\n      } else {\n        const msg = await this.jsonData(reducedData, pckmnt._id)\n        if (msg !== '') {\n          results[name] = JSON.parse(msg)\n        }\n      }\n    }\n    if (Object.keys(results).length > 0) {\n      console.log(JSON.stringify(results, null, 2))\n    }\n  }\n\n  async getData (pkg, args) {\n    const opts = {\n      ...this.npm.flatOptions,\n      preferOnline: true,\n      fullMetadata: true,\n    }\n\n    const spec = npa(pkg)\n\n    // get the data about this package\n    let version = this.npm.config.get('tag')\n    // rawSpec is the git url if this is from git\n    if (spec.type !== 'git' && spec.type !== 'directory' && spec.rawSpec) {\n      version = spec.rawSpec\n    }\n\n    const pckmnt = await packument(spec, opts)\n\n    if (pckmnt['dist-tags'] && pckmnt['dist-tags'][version]) {\n      version = pckmnt['dist-tags'][version]\n    }\n    if (pckmnt.time && pckmnt.time.unpublished) {\n      const u = pckmnt.time.unpublished\n      const er = new Error(`Unpublished on ${u.time}`)\n      er.statusCode = 404\n      er.code = 'E404'\n      er.pkgid = pckmnt._id\n      throw er\n    }\n\n    const data = []\n    const versions = pckmnt.versions || {}\n    pckmnt.versions = Object.keys(versions).sort(semver.compareLoose)\n\n    // remove readme unless we asked for it\n    if (args.indexOf('readme') === -1) {\n      delete pckmnt.readme\n    }\n\n    Object.keys(versions).forEach((v) => {\n      if (semver.satisfies(v, version, true)) {\n        args.forEach(arg => {\n          // remove readme unless we asked for it\n          if (args.indexOf('readme') !== -1) {\n            delete versions[v].readme\n          }\n\n          data.push(showFields(pckmnt, versions[v], arg))\n        })\n      }\n    })\n\n    // No data has been pushed because no data is matching the specified version\n    if (data.length === 0 && version !== 'latest') {\n      const er = new Error(`No match found for version ${version}`)\n      er.statusCode = 404\n      er.code = 'E404'\n      er.pkgid = `${pckmnt._id}@${version}`\n      throw er\n    }\n\n    if (\n      !this.npm.config.get('json') &&\n      args.length === 1 &&\n      args[0] === ''\n    ) {\n      pckmnt.version = version\n    }\n\n    return [pckmnt, data]\n  }\n\n  async jsonData (data, name) {\n    const versions = Object.keys(data)\n    let msg = ''\n    let msgJson = []\n    const includeVersions = versions.length > 1\n    let includeFields\n    const json = this.npm.config.get('json')\n\n    versions.forEach((v) => {\n      const fields = Object.keys(data[v])\n      includeFields = includeFields || (fields.length > 1)\n      if (json) {\n        msgJson.push({})\n      }\n      fields.forEach((f) => {\n        let d = cleanup(data[v][f])\n        if (fields.length === 1 && json) {\n          msgJson[msgJson.length - 1][f] = d\n        }\n\n        if (includeVersions || includeFields || typeof d !== 'string') {\n          if (json) {\n            msgJson[msgJson.length - 1][f] = d\n          } else {\n            d = inspect(d, {\n              showHidden: false,\n              depth: 5,\n              colors: this.npm.color,\n              maxArrayLength: null,\n            })\n          }\n        } else if (typeof d === 'string' && json) {\n          d = JSON.stringify(d)\n        }\n\n        if (!json) {\n          if (f && includeFields) {\n            f += ' = '\n          }\n          msg += (includeVersions ? name + '@' + v + ' ' : '') +\n            (includeFields ? f : '') + d + '\\n'\n        }\n      })\n    })\n\n    if (json) {\n      if (msgJson.length && Object.keys(msgJson[0]).length === 1) {\n        const k = Object.keys(msgJson[0])[0]\n        msgJson = msgJson.map(m => m[k])\n      }\n      if (msgJson.length === 1) {\n        msg = JSON.stringify(msgJson[0], null, 2) + '\\n'\n      } else if (msgJson.length > 1) {\n        msg = JSON.stringify(msgJson, null, 2) + '\\n'\n      }\n    }\n\n    return msg.trim()\n  }\n\n  prettyView (packument, manifest) {\n    // More modern, pretty printing of default view\n    const unicode = this.npm.config.get('unicode')\n    const tags = []\n\n    Object.keys(packument['dist-tags']).forEach((t) => {\n      const version = packument['dist-tags'][t]\n      tags.push(`${chalk.bold.green(t)}: ${version}`)\n    })\n    const unpackedSize = manifest.dist.unpackedSize &&\n      formatBytes(manifest.dist.unpackedSize, true)\n    const licenseField = manifest.license || 'Proprietary'\n    const info = {\n      name: chalk.green(manifest.name),\n      version: chalk.green(manifest.version),\n      bins: Object.keys(manifest.bin || {}),\n      versions: chalk.yellow(packument.versions.length + ''),\n      description: manifest.description,\n      deprecated: manifest.deprecated,\n      keywords: packument.keywords || [],\n      license: typeof licenseField === 'string'\n        ? licenseField\n        : (licenseField.type || 'Proprietary'),\n      deps: Object.keys(manifest.dependencies || {}).map((dep) => {\n        return `${chalk.yellow(dep)}: ${manifest.dependencies[dep]}`\n      }),\n      publisher: manifest._npmUser && unparsePerson({\n        name: chalk.yellow(manifest._npmUser.name),\n        email: chalk.cyan(manifest._npmUser.email),\n      }),\n      modified: !packument.time ? undefined\n      : chalk.yellow(relativeDate(packument.time[manifest.version])),\n      maintainers: (packument.maintainers || []).map((u) => unparsePerson({\n        name: chalk.yellow(u.name),\n        email: chalk.cyan(u.email),\n      })),\n      repo: (\n        manifest.bugs && (manifest.bugs.url || manifest.bugs)\n      ) || (\n        manifest.repository && (manifest.repository.url || manifest.repository)\n      ),\n      site: (\n        manifest.homepage && (manifest.homepage.url || manifest.homepage)\n      ),\n      tags,\n      tarball: chalk.cyan(manifest.dist.tarball),\n      shasum: chalk.yellow(manifest.dist.shasum),\n      integrity:\n        manifest.dist.integrity && chalk.yellow(manifest.dist.integrity),\n      fileCount:\n        manifest.dist.fileCount && chalk.yellow(manifest.dist.fileCount),\n      unpackedSize: unpackedSize && chalk.yellow(unpackedSize),\n    }\n    if (info.license.toLowerCase().trim() === 'proprietary') {\n      info.license = chalk.bold.red(info.license)\n    } else {\n      info.license = chalk.green(info.license)\n    }\n\n    console.log('')\n    console.log(\n      chalk.underline.bold(`${info.name}@${info.version}`) +\n      ' | ' + info.license +\n      ' | deps: ' + (info.deps.length ? chalk.cyan(info.deps.length) : chalk.green('none')) +\n      ' | versions: ' + info.versions\n    )\n    info.description && console.log(info.description)\n    if (info.repo || info.site) {\n      info.site && console.log(chalk.cyan(info.site))\n    }\n\n    const warningSign = unicode ? ' ⚠️ ' : '!!'\n    info.deprecated && console.log(\n      `\\n${chalk.bold.red('DEPRECATED')}${\n      warningSign\n    } - ${info.deprecated}`\n    )\n\n    if (info.keywords.length) {\n      console.log('')\n      console.log('keywords:', chalk.yellow(info.keywords.join(', ')))\n    }\n\n    if (info.bins.length) {\n      console.log('')\n      console.log('bin:', chalk.yellow(info.bins.join(', ')))\n    }\n\n    console.log('')\n    console.log('dist')\n    console.log('.tarball:', info.tarball)\n    console.log('.shasum:', info.shasum)\n    info.integrity && console.log('.integrity:', info.integrity)\n    info.unpackedSize && console.log('.unpackedSize:', info.unpackedSize)\n\n    const maxDeps = 24\n    if (info.deps.length) {\n      console.log('')\n      console.log('dependencies:')\n      console.log(columns(info.deps.slice(0, maxDeps), { padding: 1 }))\n      if (info.deps.length > maxDeps) {\n        console.log(`(...and ${info.deps.length - maxDeps} more.)`)\n      }\n    }\n\n    if (info.maintainers && info.maintainers.length) {\n      console.log('')\n      console.log('maintainers:')\n      info.maintainers.forEach((u) => console.log('-', u))\n    }\n\n    console.log('')\n    console.log('dist-tags:')\n    console.log(columns(info.tags))\n\n    if (info.publisher || info.modified) {\n      let publishInfo = 'published'\n      if (info.modified) {\n        publishInfo += ` ${info.modified}`\n      }\n      if (info.publisher) {\n        publishInfo += ` by ${info.publisher}`\n      }\n      console.log('')\n      console.log(publishInfo)\n    }\n  }\n}\nmodule.exports = View\n\nfunction cleanBlanks (obj) {\n  const clean = {}\n  Object.keys(obj).forEach((version) => {\n    clean[version] = obj[version]['']\n  })\n  return clean\n}\n\n// takes an array of objects and merges them into one object\nfunction reducer (acc, cur) {\n  if (cur) {\n    Object.keys(cur).forEach((v) => {\n      acc[v] = acc[v] || {}\n      Object.keys(cur[v]).forEach((t) => {\n        acc[v][t] = cur[v][t]\n      })\n    })\n  }\n\n  return acc\n}\n\n// return whatever was printed\nfunction showFields (data, version, fields) {\n  const o = {}\n  ;[data, version].forEach((s) => {\n    Object.keys(s).forEach((k) => {\n      o[k] = s[k]\n    })\n  })\n\n  const queryable = new Queryable(o)\n  const s = queryable.query(fields)\n  const res = { [version.version]: s }\n\n  if (s) {\n    return res\n  }\n}\n\nfunction cleanup (data) {\n  if (Array.isArray(data)) {\n    return data.map(cleanup)\n  }\n\n  if (!data || typeof data !== 'object') {\n    return data\n  }\n\n  const keys = Object.keys(data)\n  if (keys.length <= 3 &&\n      data.name &&\n      (keys.length === 1 ||\n       (keys.length === 3 && data.email && data.url) ||\n       (keys.length === 2 && (data.email || data.url)))) {\n    data = unparsePerson(data)\n  }\n\n  return data\n}\n\nfunction unparsePerson (d) {\n  return d.name +\n    (d.email ? ' <' + d.email + '>' : '') +\n    (d.url ? ' (' + d.url + ')' : '')\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"script"}