{"ast":null,"code":"const npmFetch = require('npm-registry-fetch');\n\nmodule.exports = async (npm, opts) => {\n  const {\n    registry\n  } = opts; // First, check if we have a user/pass-based auth\n\n  const creds = npm.config.getCredentialsByURI(registry);\n\n  if (creds.username) {\n    return creds.username;\n  } // No username, but we have other credentials; fetch the username from registry\n\n\n  if (creds.token || creds.certfile && creds.keyfile) {\n    const registryData = await npmFetch.json('/-/whoami', { ...opts\n    });\n    return registryData.username;\n  } // At this point, even if they have a credentials object, it doesn't have a\n  // valid token.\n\n\n  throw Object.assign(new Error('This command requires you to be logged in.'), {\n    code: 'ENEEDAUTH'\n  });\n};","map":{"version":3,"names":["npmFetch","require","module","exports","npm","opts","registry","creds","config","getCredentialsByURI","username","token","certfile","keyfile","registryData","json","Object","assign","Error","code"],"sources":["/Users/chelsea/Documents/0_AllCoding/shoppingstories-v3/node_modules/npm/lib/utils/get-identity.js"],"sourcesContent":["const npmFetch = require('npm-registry-fetch')\n\nmodule.exports = async (npm, opts) => {\n  const { registry } = opts\n\n  // First, check if we have a user/pass-based auth\n  const creds = npm.config.getCredentialsByURI(registry)\n  if (creds.username) {\n    return creds.username\n  }\n\n  // No username, but we have other credentials; fetch the username from registry\n  if (creds.token || creds.certfile && creds.keyfile) {\n    const registryData = await npmFetch.json('/-/whoami', { ...opts })\n    return registryData.username\n  }\n\n  // At this point, even if they have a credentials object, it doesn't have a\n  // valid token.\n  throw Object.assign(\n    new Error('This command requires you to be logged in.'),\n    { code: 'ENEEDAUTH' }\n  )\n}\n"],"mappings":"AAAA,MAAMA,QAAQ,GAAGC,OAAO,CAAC,oBAAD,CAAxB;;AAEAC,MAAM,CAACC,OAAP,GAAiB,OAAOC,GAAP,EAAYC,IAAZ,KAAqB;EACpC,MAAM;IAAEC;EAAF,IAAeD,IAArB,CADoC,CAGpC;;EACA,MAAME,KAAK,GAAGH,GAAG,CAACI,MAAJ,CAAWC,mBAAX,CAA+BH,QAA/B,CAAd;;EACA,IAAIC,KAAK,CAACG,QAAV,EAAoB;IAClB,OAAOH,KAAK,CAACG,QAAb;EACD,CAPmC,CASpC;;;EACA,IAAIH,KAAK,CAACI,KAAN,IAAeJ,KAAK,CAACK,QAAN,IAAkBL,KAAK,CAACM,OAA3C,EAAoD;IAClD,MAAMC,YAAY,GAAG,MAAMd,QAAQ,CAACe,IAAT,CAAc,WAAd,EAA2B,EAAE,GAAGV;IAAL,CAA3B,CAA3B;IACA,OAAOS,YAAY,CAACJ,QAApB;EACD,CAbmC,CAepC;EACA;;;EACA,MAAMM,MAAM,CAACC,MAAP,CACJ,IAAIC,KAAJ,CAAU,4CAAV,CADI,EAEJ;IAAEC,IAAI,EAAE;EAAR,CAFI,CAAN;AAID,CArBD"},"metadata":{},"sourceType":"script"}