{"ast":null,"code":"var _jsxFileName = \"/Users/chelsea/Documents/0_AllCoding/shoppingstories-v3/client/src/components/Auth.js\",\n    _s = $RefreshSig$();\n\nimport React, { createContext, useContext, useState, useEffect } from \"react\";\nimport { CognitoUser, AuthenticationDetails } from \"amazon-cognito-identity-js\";\nimport { Auth } from '@aws-amplify/auth';\nimport Pool from '../UserPool';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nAuth.configure(Pool);\nconst AuthContext = /*#__PURE__*/createContext();\n\nconst AuthProvider = props => {\n  _s();\n\n  const getSession = async () => {\n    return await new Promise((resolve, reject) => {\n      const user = Pool.getCurrentUser();\n\n      if (user) {\n        user.getSession((err, session) => {\n          if (err) {\n            reject();\n          } else {\n            resolve(session);\n          }\n        });\n      } else {\n        reject();\n      }\n    });\n  };\n\n  const [isSignedIn, setIsSignedIn] = useState(false);\n  useEffect(() => {\n    getSession().then(session => {\n      console.log(\"Session: \", session);\n      setIsSignedIn(true);\n    }).catch(err => console.log(err));\n    ;\n  }, []); // Login function\n\n  const authenticate = async (Username, Password) => {\n    return await new Promise((resolve, reject) => {\n      const user = new CognitoUser({\n        Username,\n        Pool\n      });\n      const authDetails = new AuthenticationDetails({\n        Username,\n        Password\n      });\n      user.authenticateUser(authDetails, {\n        onSuccess: data => {\n          console.log(\"onSuccess: \", data);\n          resolve(data);\n        },\n        onFailure: err => {\n          console.error(\"onFailure: \", err);\n          reject(err);\n        },\n        newPasswordRequired: data => {\n          console.log(\"newPasswordRequired: \", data);\n          resolve(data);\n        }\n      });\n    });\n  };\n\n  const logOut = () => {\n    const user = Pool.getCurrentUser();\n\n    if (user) {\n      user.signOut();\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(AuthContext.Provider, {\n    value: {\n      authenticate,\n      getSession,\n      logOut,\n      isSignedIn\n    },\n    children: props.children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 72,\n    columnNumber: 9\n  }, this);\n};\n\n_s(AuthProvider, \"ES28sB8qKBhxH4u/sxzLxEgNPXw=\");\n\n_c = AuthProvider;\nexport { AuthProvider, AuthContext };\n\nvar _c;\n\n$RefreshReg$(_c, \"AuthProvider\");","map":{"version":3,"names":["React","createContext","useContext","useState","useEffect","CognitoUser","AuthenticationDetails","Auth","Pool","configure","AuthContext","AuthProvider","props","getSession","Promise","resolve","reject","user","getCurrentUser","err","session","isSignedIn","setIsSignedIn","then","console","log","catch","authenticate","Username","Password","authDetails","authenticateUser","onSuccess","data","onFailure","error","newPasswordRequired","logOut","signOut","children"],"sources":["/Users/chelsea/Documents/0_AllCoding/shoppingstories-v3/client/src/components/Auth.js"],"sourcesContent":["import React, { createContext, useContext, useState, useEffect } from \"react\";\nimport { CognitoUser, AuthenticationDetails} from \"amazon-cognito-identity-js\";\nimport { Auth } from '@aws-amplify/auth';\nimport Pool from '../UserPool';\n\nAuth.configure(Pool);\nconst AuthContext = createContext();\n\nconst AuthProvider = (props) => {\n\n    const getSession = async () => {\n        return await new Promise((resolve, reject) => {\n            const user = Pool.getCurrentUser();\n            if (user){\n                user.getSession((err, session) => {\n                    if (err){\n                        reject();\n                    } else{\n                        resolve(session)\n                    }\n                });\n            } else{\n                reject();\n            }\n        });\n    };\n\n\n    const [isSignedIn, setIsSignedIn] = useState(false);\n    useEffect(() => {\n        getSession().then((session) => {\n            console.log(\"Session: \", session)\n            setIsSignedIn(true)\n        }).catch((err) => console.log(err)); ;\n    },[]);\n\n\n    \n\n    // Login function\n    const authenticate = async (Username, Password) => {\n        return await new Promise((resolve, reject) => {\n            const user = new CognitoUser({Username, Pool});\n            const authDetails = new AuthenticationDetails({Username, Password}); \n\n            user.authenticateUser(authDetails, {\n                onSuccess: (data) => {\n                    console.log(\"onSuccess: \", data);\n                    resolve(data);\n                },\n                onFailure: (err) => {\n                    console.error(\"onFailure: \", err);\n                    reject(err);\n                }, \n                newPasswordRequired: (data) => {\n                    console.log(\"newPasswordRequired: \", data);\n                    resolve(data);\n                }\n            });\n        });\n    };\n\n    const logOut = () => {\n        const user = Pool.getCurrentUser()\n        if (user){\n            user.signOut()\n        }\n    }\n\n\n    return(\n        <AuthContext.Provider value={{authenticate, getSession, logOut, isSignedIn}}>\n            {props.children}\n        </AuthContext.Provider>\n    )\n}\n\nexport {AuthProvider, AuthContext};\n\n"],"mappings":";;;AAAA,OAAOA,KAAP,IAAgBC,aAAhB,EAA+BC,UAA/B,EAA2CC,QAA3C,EAAqDC,SAArD,QAAsE,OAAtE;AACA,SAASC,WAAT,EAAsBC,qBAAtB,QAAkD,4BAAlD;AACA,SAASC,IAAT,QAAqB,mBAArB;AACA,OAAOC,IAAP,MAAiB,aAAjB;;AAEAD,IAAI,CAACE,SAAL,CAAeD,IAAf;AACA,MAAME,WAAW,gBAAGT,aAAa,EAAjC;;AAEA,MAAMU,YAAY,GAAIC,KAAD,IAAW;EAAA;;EAE5B,MAAMC,UAAU,GAAG,YAAY;IAC3B,OAAO,MAAM,IAAIC,OAAJ,CAAY,CAACC,OAAD,EAAUC,MAAV,KAAqB;MAC1C,MAAMC,IAAI,GAAGT,IAAI,CAACU,cAAL,EAAb;;MACA,IAAID,IAAJ,EAAS;QACLA,IAAI,CAACJ,UAAL,CAAgB,CAACM,GAAD,EAAMC,OAAN,KAAkB;UAC9B,IAAID,GAAJ,EAAQ;YACJH,MAAM;UACT,CAFD,MAEM;YACFD,OAAO,CAACK,OAAD,CAAP;UACH;QACJ,CAND;MAOH,CARD,MAQM;QACFJ,MAAM;MACT;IACJ,CAbY,CAAb;EAcH,CAfD;;EAkBA,MAAM,CAACK,UAAD,EAAaC,aAAb,IAA8BnB,QAAQ,CAAC,KAAD,CAA5C;EACAC,SAAS,CAAC,MAAM;IACZS,UAAU,GAAGU,IAAb,CAAmBH,OAAD,IAAa;MAC3BI,OAAO,CAACC,GAAR,CAAY,WAAZ,EAAyBL,OAAzB;MACAE,aAAa,CAAC,IAAD,CAAb;IACH,CAHD,EAGGI,KAHH,CAGUP,GAAD,IAASK,OAAO,CAACC,GAAR,CAAYN,GAAZ,CAHlB;IAGqC;EACxC,CALQ,EAKP,EALO,CAAT,CArB4B,CA+B5B;;EACA,MAAMQ,YAAY,GAAG,OAAOC,QAAP,EAAiBC,QAAjB,KAA8B;IAC/C,OAAO,MAAM,IAAIf,OAAJ,CAAY,CAACC,OAAD,EAAUC,MAAV,KAAqB;MAC1C,MAAMC,IAAI,GAAG,IAAIZ,WAAJ,CAAgB;QAACuB,QAAD;QAAWpB;MAAX,CAAhB,CAAb;MACA,MAAMsB,WAAW,GAAG,IAAIxB,qBAAJ,CAA0B;QAACsB,QAAD;QAAWC;MAAX,CAA1B,CAApB;MAEAZ,IAAI,CAACc,gBAAL,CAAsBD,WAAtB,EAAmC;QAC/BE,SAAS,EAAGC,IAAD,IAAU;UACjBT,OAAO,CAACC,GAAR,CAAY,aAAZ,EAA2BQ,IAA3B;UACAlB,OAAO,CAACkB,IAAD,CAAP;QACH,CAJ8B;QAK/BC,SAAS,EAAGf,GAAD,IAAS;UAChBK,OAAO,CAACW,KAAR,CAAc,aAAd,EAA6BhB,GAA7B;UACAH,MAAM,CAACG,GAAD,CAAN;QACH,CAR8B;QAS/BiB,mBAAmB,EAAGH,IAAD,IAAU;UAC3BT,OAAO,CAACC,GAAR,CAAY,uBAAZ,EAAqCQ,IAArC;UACAlB,OAAO,CAACkB,IAAD,CAAP;QACH;MAZ8B,CAAnC;IAcH,CAlBY,CAAb;EAmBH,CApBD;;EAsBA,MAAMI,MAAM,GAAG,MAAM;IACjB,MAAMpB,IAAI,GAAGT,IAAI,CAACU,cAAL,EAAb;;IACA,IAAID,IAAJ,EAAS;MACLA,IAAI,CAACqB,OAAL;IACH;EACJ,CALD;;EAQA,oBACI,QAAC,WAAD,CAAa,QAAb;IAAsB,KAAK,EAAE;MAACX,YAAD;MAAed,UAAf;MAA2BwB,MAA3B;MAAmChB;IAAnC,CAA7B;IAAA,UACKT,KAAK,CAAC2B;EADX;IAAA;IAAA;IAAA;EAAA,QADJ;AAKH,CAnED;;GAAM5B,Y;;KAAAA,Y;AAqEN,SAAQA,YAAR,EAAsBD,WAAtB"},"metadata":{},"sourceType":"module"}