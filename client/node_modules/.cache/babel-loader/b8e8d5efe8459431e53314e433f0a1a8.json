{"ast":null,"code":"// mixin implementing the audit method\nconst AuditReport = require('../audit-report.js'); // shared with reify\n\n\nconst _global = Symbol.for('global');\n\nconst _workspaces = Symbol.for('workspaces');\n\nconst _includeWorkspaceRoot = Symbol.for('includeWorkspaceRoot');\n\nmodule.exports = cls => class Auditor extends cls {\n  async audit() {\n    let options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    this.addTracker('audit');\n\n    if (this[_global]) {\n      throw Object.assign(new Error('`npm audit` does not support testing globals'), {\n        code: 'EAUDITGLOBAL'\n      });\n    } // allow the user to set options on the ctor as well.\n    // XXX: deprecate separate method options objects.\n\n\n    options = { ...this.options,\n      ...options\n    };\n    process.emit('time', 'audit');\n    const tree = await this.loadVirtual();\n\n    if (this[_workspaces] && this[_workspaces].length) {\n      options.filterSet = this.workspaceDependencySet(tree, this[_workspaces], this[_includeWorkspaceRoot]);\n    }\n\n    if (!options.workspacesEnabled) {\n      options.filterSet = this.excludeWorkspacesDependencySet(tree);\n    }\n\n    this.auditReport = await AuditReport.load(tree, options);\n    const ret = options.fix ? this.reify(options) : this.auditReport;\n    process.emit('timeEnd', 'audit');\n    this.finishTracker('audit');\n    return ret;\n  }\n\n};","map":{"version":3,"names":["AuditReport","require","_global","Symbol","for","_workspaces","_includeWorkspaceRoot","module","exports","cls","Auditor","audit","options","addTracker","Object","assign","Error","code","process","emit","tree","loadVirtual","length","filterSet","workspaceDependencySet","workspacesEnabled","excludeWorkspacesDependencySet","auditReport","load","ret","fix","reify","finishTracker"],"sources":["/Users/chelsea/Documents/0_AllCoding/shoppingstories-v3/node_modules/npm/node_modules/@npmcli/arborist/lib/arborist/audit.js"],"sourcesContent":["// mixin implementing the audit method\n\nconst AuditReport = require('../audit-report.js')\n\n// shared with reify\nconst _global = Symbol.for('global')\nconst _workspaces = Symbol.for('workspaces')\nconst _includeWorkspaceRoot = Symbol.for('includeWorkspaceRoot')\n\nmodule.exports = cls => class Auditor extends cls {\n  async audit (options = {}) {\n    this.addTracker('audit')\n    if (this[_global]) {\n      throw Object.assign(\n        new Error('`npm audit` does not support testing globals'),\n        { code: 'EAUDITGLOBAL' }\n      )\n    }\n\n    // allow the user to set options on the ctor as well.\n    // XXX: deprecate separate method options objects.\n    options = { ...this.options, ...options }\n\n    process.emit('time', 'audit')\n    const tree = await this.loadVirtual()\n    if (this[_workspaces] && this[_workspaces].length) {\n      options.filterSet = this.workspaceDependencySet(\n        tree,\n        this[_workspaces],\n        this[_includeWorkspaceRoot]\n      )\n    }\n    if (!options.workspacesEnabled) {\n      options.filterSet =\n        this.excludeWorkspacesDependencySet(tree)\n    }\n    this.auditReport = await AuditReport.load(tree, options)\n    const ret = options.fix ? this.reify(options) : this.auditReport\n    process.emit('timeEnd', 'audit')\n    this.finishTracker('audit')\n    return ret\n  }\n}\n"],"mappings":"AAAA;AAEA,MAAMA,WAAW,GAAGC,OAAO,CAAC,oBAAD,CAA3B,C,CAEA;;;AACA,MAAMC,OAAO,GAAGC,MAAM,CAACC,GAAP,CAAW,QAAX,CAAhB;;AACA,MAAMC,WAAW,GAAGF,MAAM,CAACC,GAAP,CAAW,YAAX,CAApB;;AACA,MAAME,qBAAqB,GAAGH,MAAM,CAACC,GAAP,CAAW,sBAAX,CAA9B;;AAEAG,MAAM,CAACC,OAAP,GAAiBC,GAAG,IAAI,MAAMC,OAAN,SAAsBD,GAAtB,CAA0B;EACrC,MAALE,KAAK,GAAgB;IAAA,IAAdC,OAAc,uEAAJ,EAAI;IACzB,KAAKC,UAAL,CAAgB,OAAhB;;IACA,IAAI,KAAKX,OAAL,CAAJ,EAAmB;MACjB,MAAMY,MAAM,CAACC,MAAP,CACJ,IAAIC,KAAJ,CAAU,8CAAV,CADI,EAEJ;QAAEC,IAAI,EAAE;MAAR,CAFI,CAAN;IAID,CAPwB,CASzB;IACA;;;IACAL,OAAO,GAAG,EAAE,GAAG,KAAKA,OAAV;MAAmB,GAAGA;IAAtB,CAAV;IAEAM,OAAO,CAACC,IAAR,CAAa,MAAb,EAAqB,OAArB;IACA,MAAMC,IAAI,GAAG,MAAM,KAAKC,WAAL,EAAnB;;IACA,IAAI,KAAKhB,WAAL,KAAqB,KAAKA,WAAL,EAAkBiB,MAA3C,EAAmD;MACjDV,OAAO,CAACW,SAAR,GAAoB,KAAKC,sBAAL,CAClBJ,IADkB,EAElB,KAAKf,WAAL,CAFkB,EAGlB,KAAKC,qBAAL,CAHkB,CAApB;IAKD;;IACD,IAAI,CAACM,OAAO,CAACa,iBAAb,EAAgC;MAC9Bb,OAAO,CAACW,SAAR,GACE,KAAKG,8BAAL,CAAoCN,IAApC,CADF;IAED;;IACD,KAAKO,WAAL,GAAmB,MAAM3B,WAAW,CAAC4B,IAAZ,CAAiBR,IAAjB,EAAuBR,OAAvB,CAAzB;IACA,MAAMiB,GAAG,GAAGjB,OAAO,CAACkB,GAAR,GAAc,KAAKC,KAAL,CAAWnB,OAAX,CAAd,GAAoC,KAAKe,WAArD;IACAT,OAAO,CAACC,IAAR,CAAa,SAAb,EAAwB,OAAxB;IACA,KAAKa,aAAL,CAAmB,OAAnB;IACA,OAAOH,GAAP;EACD;;AAhC+C,CAAlD"},"metadata":{},"sourceType":"script"}