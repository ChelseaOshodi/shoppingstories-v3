{"ast":null,"code":"const {\n  URL\n} = require('url');\n\nconst PackageUrlCmd = require('../package-url-cmd.js');\n\nclass Repo extends PackageUrlCmd {\n  static description = 'Open package repository page in the browser';\n  static name = 'repo';\n\n  getUrl(spec, mani) {\n    const r = mani.repository;\n    const rurl = !r ? null : typeof r === 'string' ? r : typeof r === 'object' && typeof r.url === 'string' ? r.url : null;\n\n    if (!rurl) {\n      throw Object.assign(new Error('no repository'), {\n        pkgid: spec\n      });\n    }\n\n    const info = this.hostedFromMani(mani);\n    const url = info ? info.browse(mani.repository.directory) : unknownHostedUrl(rurl);\n\n    if (!url) {\n      throw Object.assign(new Error('no repository: could not get url'), {\n        pkgid: spec\n      });\n    }\n\n    return url;\n  }\n\n}\n\nmodule.exports = Repo;\n\nconst unknownHostedUrl = url => {\n  try {\n    const {\n      protocol,\n      hostname,\n      pathname\n    } = new URL(url);\n    /* istanbul ignore next - URL ctor should prevent this */\n\n    if (!protocol || !hostname) {\n      return null;\n    }\n\n    const proto = /(git\\+)http:$/.test(protocol) ? 'http:' : 'https:';\n    const path = pathname.replace(/\\.git$/, '');\n    return `${proto}//${hostname}${path}`;\n  } catch (e) {\n    return null;\n  }\n};","map":{"version":3,"names":["URL","require","PackageUrlCmd","Repo","description","name","getUrl","spec","mani","r","repository","rurl","url","Object","assign","Error","pkgid","info","hostedFromMani","browse","directory","unknownHostedUrl","module","exports","protocol","hostname","pathname","proto","test","path","replace","e"],"sources":["/Users/chelsea/Documents/0_AllCoding/shoppingstories-v3/node_modules/npm/lib/commands/repo.js"],"sourcesContent":["const { URL } = require('url')\n\nconst PackageUrlCmd = require('../package-url-cmd.js')\nclass Repo extends PackageUrlCmd {\n  static description = 'Open package repository page in the browser'\n  static name = 'repo'\n\n  getUrl (spec, mani) {\n    const r = mani.repository\n    const rurl = !r ? null\n      : typeof r === 'string' ? r\n      : typeof r === 'object' && typeof r.url === 'string' ? r.url\n      : null\n\n    if (!rurl) {\n      throw Object.assign(new Error('no repository'), {\n        pkgid: spec,\n      })\n    }\n\n    const info = this.hostedFromMani(mani)\n    const url = info ?\n      info.browse(mani.repository.directory) : unknownHostedUrl(rurl)\n\n    if (!url) {\n      throw Object.assign(new Error('no repository: could not get url'), {\n        pkgid: spec,\n      })\n    }\n    return url\n  }\n}\nmodule.exports = Repo\n\nconst unknownHostedUrl = url => {\n  try {\n    const {\n      protocol,\n      hostname,\n      pathname,\n    } = new URL(url)\n\n    /* istanbul ignore next - URL ctor should prevent this */\n    if (!protocol || !hostname) {\n      return null\n    }\n\n    const proto = /(git\\+)http:$/.test(protocol) ? 'http:' : 'https:'\n    const path = pathname.replace(/\\.git$/, '')\n    return `${proto}//${hostname}${path}`\n  } catch (e) {\n    return null\n  }\n}\n"],"mappings":"AAAA,MAAM;EAAEA;AAAF,IAAUC,OAAO,CAAC,KAAD,CAAvB;;AAEA,MAAMC,aAAa,GAAGD,OAAO,CAAC,uBAAD,CAA7B;;AACA,MAAME,IAAN,SAAmBD,aAAnB,CAAiC;EACb,OAAXE,WAAW,GAAG,6CAAH;EACP,OAAJC,IAAI,GAAG,MAAH;;EAEXC,MAAM,CAAEC,IAAF,EAAQC,IAAR,EAAc;IAClB,MAAMC,CAAC,GAAGD,IAAI,CAACE,UAAf;IACA,MAAMC,IAAI,GAAG,CAACF,CAAD,GAAK,IAAL,GACT,OAAOA,CAAP,KAAa,QAAb,GAAwBA,CAAxB,GACA,OAAOA,CAAP,KAAa,QAAb,IAAyB,OAAOA,CAAC,CAACG,GAAT,KAAiB,QAA1C,GAAqDH,CAAC,CAACG,GAAvD,GACA,IAHJ;;IAKA,IAAI,CAACD,IAAL,EAAW;MACT,MAAME,MAAM,CAACC,MAAP,CAAc,IAAIC,KAAJ,CAAU,eAAV,CAAd,EAA0C;QAC9CC,KAAK,EAAET;MADuC,CAA1C,CAAN;IAGD;;IAED,MAAMU,IAAI,GAAG,KAAKC,cAAL,CAAoBV,IAApB,CAAb;IACA,MAAMI,GAAG,GAAGK,IAAI,GACdA,IAAI,CAACE,MAAL,CAAYX,IAAI,CAACE,UAAL,CAAgBU,SAA5B,CADc,GAC2BC,gBAAgB,CAACV,IAAD,CAD3D;;IAGA,IAAI,CAACC,GAAL,EAAU;MACR,MAAMC,MAAM,CAACC,MAAP,CAAc,IAAIC,KAAJ,CAAU,kCAAV,CAAd,EAA6D;QACjEC,KAAK,EAAET;MAD0D,CAA7D,CAAN;IAGD;;IACD,OAAOK,GAAP;EACD;;AA3B8B;;AA6BjCU,MAAM,CAACC,OAAP,GAAiBpB,IAAjB;;AAEA,MAAMkB,gBAAgB,GAAGT,GAAG,IAAI;EAC9B,IAAI;IACF,MAAM;MACJY,QADI;MAEJC,QAFI;MAGJC;IAHI,IAIF,IAAI1B,GAAJ,CAAQY,GAAR,CAJJ;IAMA;;IACA,IAAI,CAACY,QAAD,IAAa,CAACC,QAAlB,EAA4B;MAC1B,OAAO,IAAP;IACD;;IAED,MAAME,KAAK,GAAG,gBAAgBC,IAAhB,CAAqBJ,QAArB,IAAiC,OAAjC,GAA2C,QAAzD;IACA,MAAMK,IAAI,GAAGH,QAAQ,CAACI,OAAT,CAAiB,QAAjB,EAA2B,EAA3B,CAAb;IACA,OAAQ,GAAEH,KAAM,KAAIF,QAAS,GAAEI,IAAK,EAApC;EACD,CAfD,CAeE,OAAOE,CAAP,EAAU;IACV,OAAO,IAAP;EACD;AACF,CAnBD"},"metadata":{},"sourceType":"script"}