{"ast":null,"code":"const npa = require('npm-package-arg');\n\nconst path = require('path');\n\nconst regFetch = require('npm-registry-fetch');\n\nconst semver = require('semver');\n\nconst log = require('../utils/log-shim');\n\nconst otplease = require('../utils/otplease.js');\n\nconst readPackage = require('read-package-json-fast');\n\nconst BaseCommand = require('../base-command.js');\n\nclass DistTag extends BaseCommand {\n  static description = 'Modify package distribution tags';\n  static params = ['workspace', 'workspaces', 'include-workspace-root'];\n  static name = 'dist-tag';\n  static usage = ['add <package-spec (with version)> [<tag>]', 'rm <package-spec> <tag>', 'ls [<package-spec>]'];\n  static ignoreImplicitWorkspace = false;\n\n  async completion(opts) {\n    const argv = opts.conf.argv.remain;\n\n    if (argv.length === 2) {\n      return ['add', 'rm', 'ls'];\n    }\n\n    switch (argv[2]) {\n      default:\n        return [];\n    }\n  }\n\n  async exec(_ref) {\n    let [cmdName, pkg, tag] = _ref;\n    const opts = { ...this.npm.flatOptions\n    };\n\n    if (['add', 'a', 'set', 's'].includes(cmdName)) {\n      return this.add(pkg, tag, opts);\n    }\n\n    if (['rm', 'r', 'del', 'd', 'remove'].includes(cmdName)) {\n      return this.remove(pkg, tag, opts);\n    }\n\n    if (['ls', 'l', 'sl', 'list'].includes(cmdName)) {\n      return this.list(pkg, opts);\n    }\n\n    if (!pkg) {\n      // when only using the pkg name the default behavior\n      // should be listing the existing tags\n      return this.list(cmdName, opts);\n    } else {\n      throw this.usageError();\n    }\n  }\n\n  async execWorkspaces(_ref2, filters) {\n    let [cmdName, pkg, tag] = _ref2;\n\n    // cmdName is some form of list\n    // pkg is one of:\n    // - unset\n    // - .\n    // - .@version\n    if (['ls', 'l', 'sl', 'list'].includes(cmdName) && (!pkg || pkg === '.' || /^\\.@/.test(pkg))) {\n      return this.listWorkspaces(filters);\n    } // pkg is unset\n    // cmdName is one of:\n    // - unset\n    // - .\n    // - .@version\n\n\n    if (!pkg && (!cmdName || cmdName === '.' || /^\\.@/.test(cmdName))) {\n      return this.listWorkspaces(filters);\n    } // anything else is just a regular dist-tag command\n    // so we fallback to the non-workspaces implementation\n\n\n    log.warn('Ignoring workspaces for specified package');\n    return this.exec([cmdName, pkg, tag]);\n  }\n\n  async add(spec, tag, opts) {\n    spec = npa(spec || '');\n    const version = spec.rawSpec;\n    const defaultTag = tag || this.npm.config.get('tag');\n    log.verbose('dist-tag add', defaultTag, 'to', spec.name + '@' + version);\n\n    if (!spec.name || !version || !defaultTag) {\n      throw this.usageError('must provide a spec with a name and version, and a tag to add');\n    }\n\n    const t = defaultTag.trim();\n\n    if (semver.validRange(t)) {\n      throw new Error('Tag name must not be a valid SemVer range: ' + t);\n    }\n\n    const tags = await this.fetchTags(spec, opts);\n\n    if (tags[t] === version) {\n      log.warn('dist-tag add', t, 'is already set to version', version);\n      return;\n    }\n\n    tags[t] = version;\n    const url = `/-/package/${spec.escapedName}/dist-tags/${encodeURIComponent(t)}`;\n    const reqOpts = { ...opts,\n      method: 'PUT',\n      body: JSON.stringify(version),\n      headers: {\n        'content-type': 'application/json'\n      },\n      spec\n    };\n    await otplease(this.npm, reqOpts, reqOpts => regFetch(url, reqOpts));\n    this.npm.output(`+${t}: ${spec.name}@${version}`);\n  }\n\n  async remove(spec, tag, opts) {\n    spec = npa(spec || '');\n    log.verbose('dist-tag del', tag, 'from', spec.name);\n\n    if (!spec.name) {\n      throw this.usageError();\n    }\n\n    const tags = await this.fetchTags(spec, opts);\n\n    if (!tags[tag]) {\n      log.info('dist-tag del', tag, 'is not a dist-tag on', spec.name);\n      throw new Error(tag + ' is not a dist-tag on ' + spec.name);\n    }\n\n    const version = tags[tag];\n    delete tags[tag];\n    const url = `/-/package/${spec.escapedName}/dist-tags/${encodeURIComponent(tag)}`;\n    const reqOpts = { ...opts,\n      method: 'DELETE',\n      spec\n    };\n    await otplease(this.npm, reqOpts, reqOpts => regFetch(url, reqOpts));\n    this.npm.output(`-${tag}: ${spec.name}@${version}`);\n  }\n\n  async list(spec, opts) {\n    if (!spec) {\n      if (this.npm.global) {\n        throw this.usageError();\n      }\n\n      const {\n        name\n      } = await readPackage(path.resolve(this.npm.prefix, 'package.json'));\n\n      if (!name) {\n        throw this.usageError();\n      }\n\n      return this.list(name, opts);\n    }\n\n    spec = npa(spec);\n\n    try {\n      const tags = await this.fetchTags(spec, opts);\n      const msg = Object.keys(tags).map(k => `${k}: ${tags[k]}`).sort().join('\\n');\n      this.npm.output(msg);\n      return tags;\n    } catch (err) {\n      log.error('dist-tag ls', \"Couldn't get dist-tag data for\", spec);\n      throw err;\n    }\n  }\n\n  async listWorkspaces(filters) {\n    await this.setWorkspaces(filters);\n\n    for (const name of this.workspaceNames) {\n      try {\n        this.npm.output(`${name}:`);\n        await this.list(npa(name), this.npm.flatOptions);\n      } catch (err) {\n        // set the exitCode directly, but ignore the error\n        // since it will have already been logged by this.list()\n        process.exitCode = 1;\n      }\n    }\n  }\n\n  async fetchTags(spec, opts) {\n    const data = await regFetch.json(`/-/package/${spec.escapedName}/dist-tags`, { ...opts,\n      'prefer-online': true,\n      spec\n    });\n\n    if (data && typeof data === 'object') {\n      delete data._etag;\n    }\n\n    if (!data || !Object.keys(data).length) {\n      throw new Error('No dist-tags found for ' + spec.name);\n    }\n\n    return data;\n  }\n\n}\n\nmodule.exports = DistTag;","map":{"version":3,"names":["npa","require","path","regFetch","semver","log","otplease","readPackage","BaseCommand","DistTag","description","params","name","usage","ignoreImplicitWorkspace","completion","opts","argv","conf","remain","length","exec","cmdName","pkg","tag","npm","flatOptions","includes","add","remove","list","usageError","execWorkspaces","filters","test","listWorkspaces","warn","spec","version","rawSpec","defaultTag","config","get","verbose","t","trim","validRange","Error","tags","fetchTags","url","escapedName","encodeURIComponent","reqOpts","method","body","JSON","stringify","headers","output","info","global","resolve","prefix","msg","Object","keys","map","k","sort","join","err","error","setWorkspaces","workspaceNames","process","exitCode","data","json","_etag","module","exports"],"sources":["/Users/chelsea/Documents/0_AllCoding/shoppingstories-v3/node_modules/npm/lib/commands/dist-tag.js"],"sourcesContent":["const npa = require('npm-package-arg')\nconst path = require('path')\nconst regFetch = require('npm-registry-fetch')\nconst semver = require('semver')\nconst log = require('../utils/log-shim')\nconst otplease = require('../utils/otplease.js')\nconst readPackage = require('read-package-json-fast')\nconst BaseCommand = require('../base-command.js')\n\nclass DistTag extends BaseCommand {\n  static description = 'Modify package distribution tags'\n  static params = ['workspace', 'workspaces', 'include-workspace-root']\n  static name = 'dist-tag'\n  static usage = [\n    'add <package-spec (with version)> [<tag>]',\n    'rm <package-spec> <tag>',\n    'ls [<package-spec>]',\n  ]\n\n  static ignoreImplicitWorkspace = false\n\n  async completion (opts) {\n    const argv = opts.conf.argv.remain\n    if (argv.length === 2) {\n      return ['add', 'rm', 'ls']\n    }\n\n    switch (argv[2]) {\n      default:\n        return []\n    }\n  }\n\n  async exec ([cmdName, pkg, tag]) {\n    const opts = {\n      ...this.npm.flatOptions,\n    }\n\n    if (['add', 'a', 'set', 's'].includes(cmdName)) {\n      return this.add(pkg, tag, opts)\n    }\n\n    if (['rm', 'r', 'del', 'd', 'remove'].includes(cmdName)) {\n      return this.remove(pkg, tag, opts)\n    }\n\n    if (['ls', 'l', 'sl', 'list'].includes(cmdName)) {\n      return this.list(pkg, opts)\n    }\n\n    if (!pkg) {\n      // when only using the pkg name the default behavior\n      // should be listing the existing tags\n      return this.list(cmdName, opts)\n    } else {\n      throw this.usageError()\n    }\n  }\n\n  async execWorkspaces ([cmdName, pkg, tag], filters) {\n    // cmdName is some form of list\n    // pkg is one of:\n    // - unset\n    // - .\n    // - .@version\n    if (['ls', 'l', 'sl', 'list'].includes(cmdName) && (!pkg || pkg === '.' || /^\\.@/.test(pkg))) {\n      return this.listWorkspaces(filters)\n    }\n\n    // pkg is unset\n    // cmdName is one of:\n    // - unset\n    // - .\n    // - .@version\n    if (!pkg && (!cmdName || cmdName === '.' || /^\\.@/.test(cmdName))) {\n      return this.listWorkspaces(filters)\n    }\n\n    // anything else is just a regular dist-tag command\n    // so we fallback to the non-workspaces implementation\n    log.warn('Ignoring workspaces for specified package')\n    return this.exec([cmdName, pkg, tag])\n  }\n\n  async add (spec, tag, opts) {\n    spec = npa(spec || '')\n    const version = spec.rawSpec\n    const defaultTag = tag || this.npm.config.get('tag')\n\n    log.verbose('dist-tag add', defaultTag, 'to', spec.name + '@' + version)\n\n    if (!spec.name || !version || !defaultTag) {\n      throw this.usageError('must provide a spec with a name and version, and a tag to add')\n    }\n\n    const t = defaultTag.trim()\n\n    if (semver.validRange(t)) {\n      throw new Error('Tag name must not be a valid SemVer range: ' + t)\n    }\n\n    const tags = await this.fetchTags(spec, opts)\n    if (tags[t] === version) {\n      log.warn('dist-tag add', t, 'is already set to version', version)\n      return\n    }\n    tags[t] = version\n    const url =\n      `/-/package/${spec.escapedName}/dist-tags/${encodeURIComponent(t)}`\n    const reqOpts = {\n      ...opts,\n      method: 'PUT',\n      body: JSON.stringify(version),\n      headers: {\n        'content-type': 'application/json',\n      },\n      spec,\n    }\n    await otplease(this.npm, reqOpts, reqOpts => regFetch(url, reqOpts))\n    this.npm.output(`+${t}: ${spec.name}@${version}`)\n  }\n\n  async remove (spec, tag, opts) {\n    spec = npa(spec || '')\n    log.verbose('dist-tag del', tag, 'from', spec.name)\n\n    if (!spec.name) {\n      throw this.usageError()\n    }\n\n    const tags = await this.fetchTags(spec, opts)\n    if (!tags[tag]) {\n      log.info('dist-tag del', tag, 'is not a dist-tag on', spec.name)\n      throw new Error(tag + ' is not a dist-tag on ' + spec.name)\n    }\n    const version = tags[tag]\n    delete tags[tag]\n    const url =\n      `/-/package/${spec.escapedName}/dist-tags/${encodeURIComponent(tag)}`\n    const reqOpts = {\n      ...opts,\n      method: 'DELETE',\n      spec,\n    }\n    await otplease(this.npm, reqOpts, reqOpts => regFetch(url, reqOpts))\n    this.npm.output(`-${tag}: ${spec.name}@${version}`)\n  }\n\n  async list (spec, opts) {\n    if (!spec) {\n      if (this.npm.global) {\n        throw this.usageError()\n      }\n      const { name } = await readPackage(path.resolve(this.npm.prefix, 'package.json'))\n      if (!name) {\n        throw this.usageError()\n      }\n\n      return this.list(name, opts)\n    }\n    spec = npa(spec)\n\n    try {\n      const tags = await this.fetchTags(spec, opts)\n      const msg =\n        Object.keys(tags).map(k => `${k}: ${tags[k]}`).sort().join('\\n')\n      this.npm.output(msg)\n      return tags\n    } catch (err) {\n      log.error('dist-tag ls', \"Couldn't get dist-tag data for\", spec)\n      throw err\n    }\n  }\n\n  async listWorkspaces (filters) {\n    await this.setWorkspaces(filters)\n\n    for (const name of this.workspaceNames) {\n      try {\n        this.npm.output(`${name}:`)\n        await this.list(npa(name), this.npm.flatOptions)\n      } catch (err) {\n        // set the exitCode directly, but ignore the error\n        // since it will have already been logged by this.list()\n        process.exitCode = 1\n      }\n    }\n  }\n\n  async fetchTags (spec, opts) {\n    const data = await regFetch.json(\n      `/-/package/${spec.escapedName}/dist-tags`,\n      { ...opts, 'prefer-online': true, spec }\n    )\n    if (data && typeof data === 'object') {\n      delete data._etag\n    }\n    if (!data || !Object.keys(data).length) {\n      throw new Error('No dist-tags found for ' + spec.name)\n    }\n\n    return data\n  }\n}\nmodule.exports = DistTag\n"],"mappings":"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"},"metadata":{},"sourceType":"script"}