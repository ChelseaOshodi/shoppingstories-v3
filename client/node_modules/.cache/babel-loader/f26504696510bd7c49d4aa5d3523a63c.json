{"ast":null,"code":"'use strict';\n\nconst npmFetch = require('npm-registry-fetch');\n\nmodule.exports = search;\n\nfunction search(query, opts) {\n  return search.stream(query, opts).collect();\n}\n\nsearch.stream = searchStream;\n\nfunction searchStream(query) {\n  let opts = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  opts = {\n    detailed: false,\n    limit: 20,\n    from: 0,\n    quality: 0.65,\n    popularity: 0.98,\n    maintenance: 0.5,\n    ...opts.opts,\n    // this is to support the cli's --searchopts parameter\n    ...opts\n  };\n\n  switch (opts.sortBy) {\n    case 'optimal':\n      {\n        opts.quality = 0.65;\n        opts.popularity = 0.98;\n        opts.maintenance = 0.5;\n        break;\n      }\n\n    case 'quality':\n      {\n        opts.quality = 1;\n        opts.popularity = 0;\n        opts.maintenance = 0;\n        break;\n      }\n\n    case 'popularity':\n      {\n        opts.quality = 0;\n        opts.popularity = 1;\n        opts.maintenance = 0;\n        break;\n      }\n\n    case 'maintenance':\n      {\n        opts.quality = 0;\n        opts.popularity = 0;\n        opts.maintenance = 1;\n        break;\n      }\n  }\n\n  return npmFetch.json.stream('/-/v1/search', 'objects.*', { ...opts,\n    query: {\n      text: Array.isArray(query) ? query.join(' ') : query,\n      size: opts.limit,\n      from: opts.from,\n      quality: opts.quality,\n      popularity: opts.popularity,\n      maintenance: opts.maintenance\n    },\n    mapJSON: obj => {\n      if (obj.package.date) {\n        obj.package.date = new Date(obj.package.date);\n      }\n\n      if (opts.detailed) {\n        return obj;\n      } else {\n        return obj.package;\n      }\n    }\n  });\n}","map":{"version":3,"names":["npmFetch","require","module","exports","search","query","opts","stream","collect","searchStream","detailed","limit","from","quality","popularity","maintenance","sortBy","json","text","Array","isArray","join","size","mapJSON","obj","package","date","Date"],"sources":["/Users/chelsea/Documents/0_AllCoding/shoppingstories-v3/node_modules/npm/node_modules/libnpmsearch/lib/index.js"],"sourcesContent":["'use strict'\n\nconst npmFetch = require('npm-registry-fetch')\n\nmodule.exports = search\nfunction search (query, opts) {\n  return search.stream(query, opts).collect()\n}\nsearch.stream = searchStream\nfunction searchStream (query, opts = {}) {\n  opts = {\n    detailed: false,\n    limit: 20,\n    from: 0,\n    quality: 0.65,\n    popularity: 0.98,\n    maintenance: 0.5,\n    ...opts.opts, // this is to support the cli's --searchopts parameter\n    ...opts,\n  }\n\n  switch (opts.sortBy) {\n    case 'optimal': {\n      opts.quality = 0.65\n      opts.popularity = 0.98\n      opts.maintenance = 0.5\n      break\n    }\n    case 'quality': {\n      opts.quality = 1\n      opts.popularity = 0\n      opts.maintenance = 0\n      break\n    }\n    case 'popularity': {\n      opts.quality = 0\n      opts.popularity = 1\n      opts.maintenance = 0\n      break\n    }\n    case 'maintenance': {\n      opts.quality = 0\n      opts.popularity = 0\n      opts.maintenance = 1\n      break\n    }\n  }\n  return npmFetch.json.stream('/-/v1/search', 'objects.*',\n    {\n      ...opts,\n      query: {\n        text: Array.isArray(query) ? query.join(' ') : query,\n        size: opts.limit,\n        from: opts.from,\n        quality: opts.quality,\n        popularity: opts.popularity,\n        maintenance: opts.maintenance,\n      },\n      mapJSON: (obj) => {\n        if (obj.package.date) {\n          obj.package.date = new Date(obj.package.date)\n        }\n        if (opts.detailed) {\n          return obj\n        } else {\n          return obj.package\n        }\n      },\n    }\n  )\n}\n"],"mappings":"AAAA;;AAEA,MAAMA,QAAQ,GAAGC,OAAO,CAAC,oBAAD,CAAxB;;AAEAC,MAAM,CAACC,OAAP,GAAiBC,MAAjB;;AACA,SAASA,MAAT,CAAiBC,KAAjB,EAAwBC,IAAxB,EAA8B;EAC5B,OAAOF,MAAM,CAACG,MAAP,CAAcF,KAAd,EAAqBC,IAArB,EAA2BE,OAA3B,EAAP;AACD;;AACDJ,MAAM,CAACG,MAAP,GAAgBE,YAAhB;;AACA,SAASA,YAAT,CAAuBJ,KAAvB,EAAyC;EAAA,IAAXC,IAAW,uEAAJ,EAAI;EACvCA,IAAI,GAAG;IACLI,QAAQ,EAAE,KADL;IAELC,KAAK,EAAE,EAFF;IAGLC,IAAI,EAAE,CAHD;IAILC,OAAO,EAAE,IAJJ;IAKLC,UAAU,EAAE,IALP;IAMLC,WAAW,EAAE,GANR;IAOL,GAAGT,IAAI,CAACA,IAPH;IAOS;IACd,GAAGA;EARE,CAAP;;EAWA,QAAQA,IAAI,CAACU,MAAb;IACE,KAAK,SAAL;MAAgB;QACdV,IAAI,CAACO,OAAL,GAAe,IAAf;QACAP,IAAI,CAACQ,UAAL,GAAkB,IAAlB;QACAR,IAAI,CAACS,WAAL,GAAmB,GAAnB;QACA;MACD;;IACD,KAAK,SAAL;MAAgB;QACdT,IAAI,CAACO,OAAL,GAAe,CAAf;QACAP,IAAI,CAACQ,UAAL,GAAkB,CAAlB;QACAR,IAAI,CAACS,WAAL,GAAmB,CAAnB;QACA;MACD;;IACD,KAAK,YAAL;MAAmB;QACjBT,IAAI,CAACO,OAAL,GAAe,CAAf;QACAP,IAAI,CAACQ,UAAL,GAAkB,CAAlB;QACAR,IAAI,CAACS,WAAL,GAAmB,CAAnB;QACA;MACD;;IACD,KAAK,aAAL;MAAoB;QAClBT,IAAI,CAACO,OAAL,GAAe,CAAf;QACAP,IAAI,CAACQ,UAAL,GAAkB,CAAlB;QACAR,IAAI,CAACS,WAAL,GAAmB,CAAnB;QACA;MACD;EAxBH;;EA0BA,OAAOf,QAAQ,CAACiB,IAAT,CAAcV,MAAd,CAAqB,cAArB,EAAqC,WAArC,EACL,EACE,GAAGD,IADL;IAEED,KAAK,EAAE;MACLa,IAAI,EAAEC,KAAK,CAACC,OAAN,CAAcf,KAAd,IAAuBA,KAAK,CAACgB,IAAN,CAAW,GAAX,CAAvB,GAAyChB,KAD1C;MAELiB,IAAI,EAAEhB,IAAI,CAACK,KAFN;MAGLC,IAAI,EAAEN,IAAI,CAACM,IAHN;MAILC,OAAO,EAAEP,IAAI,CAACO,OAJT;MAKLC,UAAU,EAAER,IAAI,CAACQ,UALZ;MAMLC,WAAW,EAAET,IAAI,CAACS;IANb,CAFT;IAUEQ,OAAO,EAAGC,GAAD,IAAS;MAChB,IAAIA,GAAG,CAACC,OAAJ,CAAYC,IAAhB,EAAsB;QACpBF,GAAG,CAACC,OAAJ,CAAYC,IAAZ,GAAmB,IAAIC,IAAJ,CAASH,GAAG,CAACC,OAAJ,CAAYC,IAArB,CAAnB;MACD;;MACD,IAAIpB,IAAI,CAACI,QAAT,EAAmB;QACjB,OAAOc,GAAP;MACD,CAFD,MAEO;QACL,OAAOA,GAAG,CAACC,OAAX;MACD;IACF;EAnBH,CADK,CAAP;AAuBD"},"metadata":{},"sourceType":"script"}